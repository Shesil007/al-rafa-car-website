<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al Rafa Car Accessories | Toyota, Nissan & 4x4 Specialists Doha</title>
    <meta name="description"
        content="One of Qatar's most trusted car accessories shops. Specialists in Toyota, Nissan, Lexus, Chevrolet, Jeep, and Volkswagen parts. Located on Al Ittihad St, Doha.">

    <!-- Schema.org Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "AutoPartsStore",
      "name": "Al Rafa Car Accessories",
      "image": "YOUR_LOGO_URL_HERE",
      "@id": "https://alrafa-qatar.com",
      "url": "https://alrafa-qatar.com",
      "telephone": "+97455843969",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Al Ittihad St",
        "addressLocality": "Doha",
        "addressCountry": "QA"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 25.2854, 
        "longitude": 51.5310
      },
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": [
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Saturday",
          "Sunday"
        ],
        "opens": "08:00",
        "closes": "00:00"
      },
      "sameAs": [
        "https://instagram.com/alrafa"
      ]
    }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <style>
        /* =========================================
           1. CSS VARIABLES & RESET
           ========================================= */
        :root {
            /* Colors - Matte Stealth Theme */
            --navy-primary: #121212;
            /* Deep Matte Black */
            --navy-secondary: #1E1E1E;
            /* Dark Charcoal */
            --beige-primary: #E0E0E0;
            /* Off-White/Silver text */
            --beige-secondary: #A0A0A0;
            /* Grey text */
            --gold-primary: #D4AF37;
            /* Metallic Gold (less yellow) */
            --gold-bright: #F4C430;
            --text-primary: #F0F0F0;
            --text-secondary: #B0B0B0;
            --card-bg: #1A1A1A;
            /* Slightly lighter black */
            --whatsapp-green: #25D366;
            --whatsapp-dark: #128C7E;

            /* Transitions */
            --ease-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-fast: 0.3s var(--ease-smooth);
            --transition-medium: 0.5s var(--ease-smooth);
            --transition-slow: 0.8s var(--ease-smooth);

            /* Typography */
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Poppins', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--navy-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: var(--font-heading);
            color: var(--beige-primary);
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        ul {
            list-style: none;
        }

        /* Helper Classes */
        .text-gold {
            color: var(--gold-primary);
        }

        .text-beige {
            color: var(--beige-primary);
        }

        .bg-navy {
            background-color: var(--navy-primary);
        }

        /* =========================================
           2. LOADING SCREEN (Feature 1)
           ========================================= */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--navy-primary);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: transform 0.8s var(--ease-smooth);
        }

        /* Logo Area */
        .loader-logo {
            font-family: var(--font-heading);
            font-size: 3rem;
            color: var(--beige-primary);
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s forwards 0.2s;
            text-shadow: 0 0 15px rgba(201, 168, 76, 0.3);
        }

        .loader-logo span {
            color: var(--gold-primary);
        }

        /* Speedometer Container */
        .speedometer-container {
            width: 200px;
            height: 100px;
            /* Half circle */
            border-top-left-radius: 110px;
            border-top-right-radius: 110px;
            border: 4px solid var(--navy-secondary);
            border-bottom: 0;
            position: relative;
            overflow: hidden;
            margin-bottom: 2rem;
        }

        .speedometer-fill {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-top-left-radius: 110px;
            border-top-right-radius: 110px;
            background: conic-gradient(from 270deg, transparent 50%, var(--gold-primary) 50%);
            transform-origin: bottom center;
            transform: rotate(-180deg);
            transition: transform 2s linear;
        }

        /* Needle */
        .speedometer-needle {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 4px;
            height: 90px;
            background-color: var(--gold-bright);
            transform-origin: bottom center;
            transform: rotate(-90deg);
            /* Start left */
            transition: transform 2s var(--ease-smooth);
            z-index: 2;
            box-shadow: 0 0 10px var(--gold-primary);
        }

        .needle-pivot {
            position: absolute;
            bottom: -10px;
            left: 50%;
            width: 20px;
            height: 20px;
            background-color: var(--gold-primary);
            border-radius: 50%;
            transform: translateX(-50%);
            z-index: 3;
        }

        /* Loading Bar */
        .loading-bar-container {
            width: 300px;
            height: 4px;
            background-color: var(--navy-secondary);
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }

        .loading-bar-progress {
            width: 0%;
            height: 100%;
            background-color: var(--gold-primary);
            box-shadow: 0 0 10px var(--gold-primary);
            transition: width 2.2s linear;
        }

        /* Particles */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            background-color: var(--gold-primary);
            border-radius: 50%;
            opacity: 0.5;
            animation: floatUp 3s infinite ease-in-out;
        }

        /* Loaded State */
        body.loaded #loading-screen {
            transform: translateY(-100%);
        }

        /* Animations */
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(1);
                opacity: 0.5;
            }

            50% {
                opacity: 0.8;
            }

            100% {
                transform: translateY(-100px) scale(0);
                opacity: 0;
            }
        }

        /* =========================================
           3. CUSTOM CURSOR (Feature 2)
           ========================================= */
        /*
        @media (hover: hover) and (pointer: fine) {
            body {
                cursor: none;
            }

            #cursor-dot,
            #cursor-ring {
                display: block;
            }
        }
        */

        #cursor-dot {
            position: fixed;
            top: 0;
            left: 0;
            width: 8px;
            height: 8px;
            background-color: var(--gold-primary);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            display: none;
            /* Hidden on touch */
        }

        #cursor-ring {
            position: fixed;
            top: 0;
            left: 0;
            width: 24px;
            height: 24px;
            border: 1px solid var(--gold-primary);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9998;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s, background-color 0.3s;
            display: none;
            /* Hidden on touch */
        }

        /* Hover States for Cursor */
        body.hovering-button #cursor-dot {
            transform: translate(-50%, -50%) scale(1.5);
        }

        body.hovering-button #cursor-ring {
            width: 40px;
            height: 40px;
            background-color: rgba(201, 168, 76, 0.2);
        }

        /* =========================================
           4. NAVBAR (Sticky & Blur)
           ========================================= */
        #main-nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 1.5rem 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            transition: padding 0.3s var(--ease-smooth), background 0.3s;
        }

        #main-nav.scrolled {
            padding: 1rem 5%;
            background: rgba(10, 22, 40, 0.9);
            /* Navy Primary with opacity */
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .nav-logo {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .nav-logo span {
            color: var(--gold-primary);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            font-family: var(--font-body);
            font-size: 0.9rem;
            color: var(--text-primary);
            position: relative;
            padding: 5px 0;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0%;
            height: 2px;
            background-color: var(--gold-primary);
            transition: width 0.3s var(--ease-smooth);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-cta {
            padding: 0.6rem 1.2rem;
            background-color: transparent;
            border: 1px solid var(--gold-primary);
            color: var(--gold-primary);
            border-radius: 4px;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-cta:hover {
            background-color: var(--gold-primary);
            color: var(--navy-primary);
        }



        /* Language Toggle */
        .lang-btn {
            background: none;
            border: 1px solid var(--text-secondary);
            color: var(--text-secondary);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            font-family: var(--font-body);
            margin-left: 1rem;
            transition: 0.3s;
        }

        .lang-btn:hover {
            border-color: var(--gold-primary);
            color: var(--gold-primary);
        }

        /* Mobile Menu */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--gold-primary);
            cursor: pointer;
        }

        .mobile-menu-overlay {
            position: fixed;
            top: 0;
            right: -100%;
            /* Slide from right */
            width: 80%;
            height: 100vh;
            background-color: var(--navy-primary);
            z-index: 2000;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            transition: 0.4s var(--ease-smooth);
            border-left: 1px solid var(--gold-primary);
        }

        .mobile-menu-overlay.active {
            right: 0;
        }

        .mobile-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1500;
            opacity: 0;
            visibility: hidden;
            transition: 0.3s;
        }

        .mobile-backdrop.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-nav-link {
            font-size: 1.2rem;
            border-bottom: 1px solid var(--navy-secondary);
            padding-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
            }
        }

        /* RTL Overrides */
        [dir="rtl"] {
            text-align: right;
            font-family: 'Tahoma', sans-serif;
        }

        [dir="rtl"] .nav-cta {
            flex-direction: row-reverse;
        }

        [dir="rtl"] .slide-out-left {
            transform: translateX(100px);
        }

        [dir="rtl"] .slide-in-right {
            transform: translateX(-100px);
        }

        [dir="rtl"] .lang-btn {
            margin-left: 0;
            margin-right: 1rem;
        }


        /* =========================================
           5. MOBILE STICKY BAR (Feature 4)
           ========================================= */
        #mobile-sticky-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            display: flex;
            z-index: 2000;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.5);
            display: none;
            /* Desktop default */
        }

        @media (max-width: 768px) {
            #mobile-sticky-bar {
                display: flex;
            }
        }

        .sticky-btn {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            color: #fff;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        .sticky-whatsapp {
            background-color: var(--whatsapp-green);
            border-top-left-radius: 15px;
            /* Rounded pill edge effect */
        }

        .sticky-call {
            background-color: var(--gold-primary);
            color: var(--navy-primary);
            border-top-right-radius: 15px;
        }

        /* =========================================
           6. HERO SECTION (Feature 3)
           ========================================= */
        .hero-section {
            height: 100vh;
            width: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background-color: var(--navy-primary);
            /* Fallback */
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            z-index: 0;
            /* Will be set by JS from SITE_IMAGES */
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(10, 22, 40, 0.9) 0%, rgba(10, 22, 40, 0.6) 50%, rgba(10, 22, 40, 0.4) 100%);
            z-index: 1;
        }

        .hero-content {
            position: relative;
            z-index: 10;
            text-align: center;
            max-width: 900px;
            padding: 0 20px;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s var(--ease-smooth), transform 1s var(--ease-smooth);
        }

        .hero-title {
            font-size: 3.5rem;
            line-height: 1.2;
            margin-bottom: 1.5rem;
        }

        .hero-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 2.5rem;
            letter-spacing: 1px;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 1rem 2.5rem;
            border-radius: 4px;
            font-family: var(--font-body);
            font-weight: 600;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s var(--ease-smooth);
            position: relative;
            overflow: hidden;
            border: none;
            cursor: pointer;
            margin: 0 10px;
        }

        .btn-gold {
            background-color: var(--gold-primary);
            color: var(--navy-primary);
        }

        .btn-gold::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: 0.5s;
        }

        .btn-gold:hover::before {
            left: 100%;
        }

        .btn-gold:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(201, 168, 76, 0.3);
        }

        .btn-whatsapp {
            background-color: transparent;
            border: 2px solid var(--whatsapp-green);
            color: var(--whatsapp-green);
        }

        .btn-whatsapp:hover {
            background-color: var(--whatsapp-green);
            color: #fff;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(37, 211, 102, 0.3);
        }

        /* Scroll Indicator */
        .scroll-indicator {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            opacity: 0;
            transition: opacity 1s 1s;
        }

        .mouse {
            width: 30px;
            height: 50px;
            border: 2px solid var(--gold-primary);
            border-radius: 20px;
            position: relative;
        }

        .wheel {
            width: 6px;
            height: 6px;
            background-color: var(--gold-primary);
            border-radius: 50%;
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            animation: scrollWheel 2s infinite;
        }

        @keyframes scrollWheel {
            0% {
                top: 10px;
                opacity: 1;
            }

            100% {
                top: 30px;
                opacity: 0;
            }
        }

        /* Use .visible class to trigger reveal */
        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* =========================================
           7. MARQUEE (Feature 4)
           ========================================= */
        .marquee-section {
            background-color: var(--navy-secondary);
            padding: 1rem 0;
            border-top: 1px solid var(--gold-primary);
            border-bottom: 1px solid var(--gold-primary);
            overflow: hidden;
            white-space: nowrap;
            position: relative;
            z-index: 5;
        }

        .marquee-content {
            display: inline-block;
            animation: marquee 30s linear infinite;
        }

        .marquee-content span {
            font-family: var(--font-body);
            font-size: 1rem;
            color: var(--beige-primary);
            margin-right: 2rem;
            font-weight: 500;
        }

        @keyframes marquee {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        /* =========================================
           8. 5-STEP VISUAL SEARCH (The Hero Feature)
           ========================================= */
        /* =========================================
           8. CENTRAL SEARCH BAR (Redesigned)
           ========================================= */
        .search-bar-section {
            padding: 2rem 5%;
            background-color: var(--navy-secondary);
            border-bottom: 1px solid var(--gold-primary);
            position: relative;
            z-index: 100;
        }

        .search-box {
            background-color: var(--card-bg);
            border: 1px solid var(--navy-primary);
            padding: 2rem;
            border-radius: 8px;
            max-width: 1000px;
            margin: 0 auto;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .search-controls {
            display: flex;
            gap: 1.5rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
            justify-content: center;
            align-items: flex-end;
        }

        .search-step-wrapper {
            flex: 1;
            min-width: 200px;
            text-align: left;
            opacity: 1;
            transition: 0.3s;
        }

        .search-step-wrapper.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        .search-step-wrapper label {
            display: block;
            color: var(--beige-primary);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .search-select {
            width: 100%;
            padding: 0.8rem;
            background-color: var(--navy-primary);
            border: 1px solid var(--navy-secondary);
            color: #fff;
            border-radius: 4px;
            font-family: var(--font-body);
            transition: 0.3s;
        }

        .search-select:focus {
            border-color: var(--gold-primary);
            outline: none;
        }

        /* Results View Overlay */
        .results-view-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--navy-primary);
            z-index: 5000;
            overflow-y: auto;
            display: none;
            /* Hidden by default */
            flex-direction: column;
        }

        .results-view-overlay.active {
            display: flex;
            animation: fadeIn 0.4s var(--ease-smooth);
        }

        .results-header-bar {
            background-color: var(--navy-secondary);
            padding: 1rem 5%;
            display: flex;
            align-items: center;
            gap: 2rem;
            border-bottom: 1px solid var(--gold-primary);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .back-btn {
            background: none;
            border: 1px solid var(--gold-primary);
            color: var(--gold-primary);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
        }

        .back-btn:hover {
            background-color: var(--gold-primary);
            color: var(--navy-primary);
        }

        .results-container {
            display: flex;
            flex: 1;
            padding: 2rem 5%;
            gap: 2rem;
        }

        .results-filters {
            width: 250px;
            background-color: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            height: fit-content;
            display: none;
            /* Hidden on mobile initially, or can be toggle */
        }

        @media (min-width: 992px) {
            .results-filters {
                display: block;
            }
        }

        .results-main {
            flex: 1;
        }

        /* Grid and Items - Reusing existing or creating new */
        .results-grid {

            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 2rem;
        }

        .product-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            transition: 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .prod-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background-color: #000;
        }

        .prod-info {
            padding: 1.5rem;
        }

        .prod-cat {
            font-size: 0.8rem;
            color: var(--gold-primary);
            text-transform: uppercase;
        }

        .prod-title {
            font-size: 1.1rem;
            margin: 0.5rem 0;
            color: var(--beige-primary);
        }

        .prod-price {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--gold-bright);
            margin-bottom: 1rem;
        }

        .compatibility-badge {
            display: inline-block;
            background-color: rgba(201, 168, 76, 0.1);
            color: var(--gold-primary);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-bottom: 1rem;
        }

        /* =========================================
           9. SPECIALIST BRANDS & TABS (Feature 5)
           ========================================= */
        .brands-section {
            padding: 4rem 5%;
            background-color: var(--navy-secondary);
        }

        .brand-grid-large {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 2rem;
            margin-bottom: 4rem;
        }

        .brand-card-large {
            background-color: var(--card-bg);
            border: 1px solid var(--navy-primary);
            padding: 2rem;
            text-align: center;
            border-radius: 8px;
            transition: 0.3s;
            cursor: pointer;
        }

        .brand-card-large:hover {
            border-color: var(--gold-primary);
            transform: translateY(-10px);
            background-color: var(--navy-primary);
        }

        /* Tabs */
        .tabs-section {
            padding: 4rem 5%;
        }

        .tabs-nav {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            overflow-x: auto;
            padding-bottom: 1rem;
        }

        .tab-btn {
            background-color: var(--card-bg);
            border: 1px solid var(--navy-secondary);
            color: var(--text-secondary);
            padding: 0.8rem 2rem;
            border-radius: 4px;
            cursor: pointer;
            font-family: var(--font-body);
            font-weight: 500;
            white-space: nowrap;
            transition: 0.3s;
        }

        .tab-btn.active,
        .tab-btn:hover {
            background-color: var(--gold-primary);
            color: var(--navy-primary);
            border-color: var(--gold-primary);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s var(--ease-smooth);
        }

        .tab-content.active {
            display: block;
        }

        .brand-hero-banner {
            width: 100%;
            height: 300px;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            margin-bottom: 2rem;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .brand-hero-overlay {
            background: rgba(10, 22, 40, 0.7);
            padding: 2rem;
            border: 1px solid var(--gold-primary);
            text-align: center;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* =========================================
           10. QUICK VIEW MODAL (Feature 3)
           ========================================= */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(10, 22, 40, 0.9);
            z-index: 9000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: 0.3s var(--ease-smooth);
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--card-bg);
            border: 2px solid var(--gold-primary);
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            border-radius: 8px;
            position: relative;
            display: flex;
            flex-direction: column;
            transform: scale(0.8);
            transition: 0.4s var(--ease-smooth);
        }

        @media (min-width: 768px) {
            .modal-content {
                flex-direction: row;
            }

            .modal-img-col {
                width: 50%;
            }

            .modal-info-col {
                width: 50%;
                padding: 3rem;
            }
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: var(--gold-primary);
            font-size: 2rem;
            cursor: pointer;
            z-index: 10;
        }

        .modal-img-col {
            background-color: #000;
            min-height: 300px;
            background-size: cover;
            background-position: center;
        }

        .modal-info-col {
            padding: 2rem;
        }

        .modal-specs ul {
            padding-left: 1.5rem;
            color: var(--text-secondary);
            margin: 1rem 0;
        }

        .modal-specs li {
            list-style: disc;
            margin-bottom: 0.5rem;
        }

        .modal-specs li::marker {
            color: var(--gold-primary);
        }

        /* =========================================
           11. PART REQUEST FORM (Feature 6)
           ========================================= */
        .request-section {
            padding: 4rem 5%;
            background-color: var(--navy-primary);
            border-top: 1px solid var(--gold-primary);
        }

        .request-form-container {
            max-width: 700px;
            margin: 0 auto;
            background-color: var(--card-bg);
            padding: 3rem;
            border-radius: 8px;
            border: 1px solid var(--navy-secondary);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--beige-primary);
        }

        .form-control {
            width: 100%;
            padding: 1rem;
            background-color: var(--navy-primary);
            border: 1px solid var(--navy-secondary);
            border-radius: 4px;
            color: var(--text-primary);
            font-family: var(--font-body);
            transition: 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--gold-primary);
        }

        .form-row {
            display: flex;
            gap: 1rem;
        }

        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }

        /* =========================================
           12. GALLERY & LEGACY SECTIONS (Features 13, 14, 16, 17)
           ========================================= */
        .parallax-divider {
            height: 400px;
            background-attachment: fixed;
            background-position: center;
            background-size: cover;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .parallax-overlay {
            background: rgba(10, 22, 40, 0.6);
            padding: 2rem;
            border: 1px solid var(--gold-primary);
            text-align: center;
            backdrop-filter: blur(3px);
        }

        .gallery-section {
            padding: 4rem 5%;
            background-color: var(--navy-secondary);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }

        .gallery-item {
            height: 250px;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.3s;
            position: relative;
            overflow: hidden;
        }

        .gallery-item:hover {
            transform: scale(1.02);
            z-index: 2;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
        }

        .gallery-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            transition: 0.3s;
        }

        .gallery-item:hover::after {
            background: rgba(0, 0, 0, 0);
        }

        .legacy-section {
            padding: 5rem 5%;
            background-color: var(--navy-primary);
            text-align: center;
        }

        .legacy-grid {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 3rem;
            margin-top: 3rem;
        }

        .legacy-item h3 {
            font-size: 3rem;
            color: var(--gold-bright);
            margin-bottom: 0.5rem;
            font-family: var(--font-heading);
        }

        .legacy-item p {
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .testimonials-section {
            padding: 4rem 5%;
            background-color: var(--navy-secondary);
        }

        .testimonial-card {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: 8px;
            border: 1px solid var(--navy-primary);
            position: relative;
            margin-bottom: 1rem;
        }

        .quote-icon {
            font-size: 3rem;
            color: var(--gold-primary);
            opacity: 0.3;
            position: absolute;
            top: 1rem;
            right: 1rem;
        }

        /* Contact & Footer */
        .contact-section {
            padding: 4rem 5%;
            background-color: var(--navy-primary);
            border-top: 1px solid var(--gold-primary);
        }

        .contact-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 3rem;
        }

        @media (min-width: 768px) {
            .contact-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .contact-info-item {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            align-items: start;
        }

        .contact-icon {
            font-size: 1.5rem;
            color: var(--gold-primary);
        }

        footer {
            background-color: #050b14;
            padding: 3rem 5%;
            text-align: center;
            border-top: 1px solid var(--navy-secondary);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: 0.3s;
        }

        .footer-links a:hover {
            color: var(--gold-primary);
        }

        /* Main Content Wrapper */
        #main-content {
            padding: 0;
            width: 100%;
            opacity: 0;
            transition: opacity 1s var(--ease-smooth) 0.5s;
        }

        body.loaded #main-content {
            opacity: 1;
        }

        /* =========================================
           14. PRODUCT CARD STYLES (Missing)
           ========================================= */
        .product-card {
            background-color: var(--card-bg);
            border: 1px solid var(--navy-secondary);
            border-radius: 8px;
            overflow: hidden;
            transition: 0.3s;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .product-card:hover {
            transform: translateY(-5px);
            border-color: var(--gold-primary);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .prod-img {
            height: 200px;
            width: 100%;
            background-color: #000;
            background-size: cover;
            background-position: center;
        }

        .prod-info {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .prod-cat {
            text-transform: uppercase;
            font-size: 0.8rem;
            color: var(--gold-primary);
            margin-bottom: 0.5rem;
        }

        .prod-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--beige-primary);
        }

        .prod-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
            margin-bottom: 1rem;
            margin-top: auto;
        }
    </style>
</head>

<body>

    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="particles" id="loader-particles"></div>
        <div class="loader-logo">Al Rafa <span>Car Accessories</span></div>
        <div class="speedometer-container">
            <!-- <div class="speedometer-fill" id="speed-fill"></div> -->
            <div class="speedometer-needle" id="speed-needle"></div>
            <div class="needle-pivot"></div>
        </div>
        <div class="loading-bar-container">
            <div class="loading-bar-progress" id="load-progress"></div>
        </div>
    </div>

    <!-- Custom Cursor -->
    <div id="cursor-dot"></div>
    <div id="cursor-ring"></div>

    <!-- Navbar -->
    <nav id="main-nav">
        <div class="nav-logo">Al Rafa <span>Car Accessories</span></div>
        <div class="nav-links">
            <a href="#hero" data-i18n="home">Home</a>
            <a href="#brands" data-i18n="brands">Specialist Brands</a>
            <a href="#search" data-i18n="search">Find Parts</a>
            <a href="#search" data-i18n="search">Find Parts</a>
            <a href="#about" data-i18n="about">About Us</a>
            <a href="#contact" data-i18n="contact">Contact</a>
        </div>

        <div style="display: flex; align-items: center; gap: 1rem;">
            <button class="lang-btn" onclick="toggleLanguage()">AR / EN</button>
            <button class="nav-cta" onclick="enquireOnWhatsApp('General Enquiry')">
                <span>Ask on WhatsApp</span>
            </button>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">☰</button>
        </div>
    </nav>

    <!-- Main Content Wrapper -->
    <main id="main-content">

        <!-- Mobile Menu -->
        <div class="mobile-backdrop" id="mobile-backdrop" onclick="toggleMobileMenu()"></div>
        <div class="mobile-menu-overlay" id="mobile-menu">
            <button class="mobile-menu-btn" style="align-self: flex-end;" onclick="toggleMobileMenu()">✕</button>
            <a href="#hero" class="mobile-nav-link" onclick="toggleMobileMenu()" data-i18n="home">Home</a>
            <a href="#search" class="mobile-nav-link" onclick="toggleMobileMenu()" data-i18n="search">Find Parts</a>
            <a href="#brands" class="mobile-nav-link" onclick="toggleMobileMenu()" data-i18n="brands">Brands</a>
            <a href="#featured" class="mobile-nav-link" onclick="toggleMobileMenu()" data-i18n="featured">Featured</a>
            <a href="#featured" class="mobile-nav-link" onclick="toggleMobileMenu()" data-i18n="featured">Featured</a>
            <a href="#about" class="mobile-nav-link" onclick="toggleMobileMenu()" data-i18n="about">About Us</a>
            <a href="#contact" class="mobile-nav-link" onclick="toggleMobileMenu()" data-i18n="contact">Contact</a>
            <button class="lang-btn" onclick="toggleLanguage(); toggleMobileMenu()">Switch to Arabic</button>
        </div>

        <!-- Hero Section -->
        <section id="hero" class="hero-section">
            <div class="hero-bg" id="hero-bg-img"></div>
            <div class="hero-overlay"></div>
            <div class="particles" id="hero-particles"></div>

            <div class="hero-content reveal" id="hero-text">
                <h1 class="hero-title">Your Ride. Your Pride. <br> <span class="text-gold">Everything It Needs.</span>
                </h1>
                <p class="hero-subtitle">Specialists in <span class="text-gold">Toyota • Nissan • Lexus • Chevrolet •
                        Jeep • Volkswagen</span></p>

                <div class="hero-ctas">
                    <a href="#search" class="btn btn-gold">Shop Now</a>
                    <button class="btn btn-whatsapp" onclick="enquireOnWhatsApp('Hero Enquiry')">Chat on
                        WhatsApp</button>
                </div>
            </div>

            <div class="scroll-indicator reveal">
                <div class="mouse">
                    <div class="wheel"></div>
                </div>
            </div>
        </section>

        <!-- Marquee -->
        <div class="marquee-section">
            <div class="marquee-content">
                <!-- Content duplicated for infinite scroll seamless loop -->
                <span>Specialist in Toyota • Nissan • Lexus • Chevrolet • Jeep • Volkswagen •
                    5000+ Motorists Served • Real Parts Real Passion • Qatar's Most Trusted • Al Ittihad St Doha •
                </span>
                <span>Specialist in Toyota • Nissan • Lexus • Chevrolet • Jeep • Volkswagen •
                    5000+ Motorists Served • Real Parts Real Passion • Qatar's Most Trusted • Al Ittihad St Doha •
                </span>
            </div>
        </div>

        <!-- 5-Step Visual Search -->
        <!-- =========================================
           8. CENTRAL SEARCH BAR (Redesigned)
           ========================================= -->
        <section id="search" class="search-bar-section">
            <div class="search-box reveal">
                <h2 class="text-beige"><span style="color:var(--gold-primary)">Find</span> Your Parts</h2>
                <div class="search-controls">
                    <!-- Step 1: Brand -->
                    <div class="search-step-wrapper">
                        <label>Brand</label>
                        <select id="sb-brand" class="search-select" onchange="onSearchBrandSelect()">
                            <option value="">Select Brand...</option>
                        </select>
                    </div>

                    <!-- Step 2: Model (Hidden initially) -->
                    <div class="search-step-wrapper disabled" id="sb-model-wrapper">
                        <label>Model</label>
                        <select id="sb-model" class="search-select" disabled>
                            <option value="">Select Model...</option>
                        </select>
                    </div>

                    <!-- Step 3: Year (Hidden initially) -->
                    <div class="search-step-wrapper disabled" id="sb-year-wrapper">
                        <label>Year</label>
                        <select id="sb-year" class="search-select" disabled>
                            <option value="">Select Year...</option>
                        </select>
                    </div>

                    <!-- Step 4: Part Name (Hidden initially) -->
                    <div class="search-step-wrapper disabled" id="sb-part-wrapper" style="flex: 1.5;">
                        <label>Part Name</label>
                        <input type="text" id="sb-part" class="search-select" list="part-options"
                            placeholder="e.g. Headlight" disabled>
                        <datalist id="part-options">
                            <!-- Populated by JS -->
                        </datalist>
                    </div>

                    <!-- Step 4: Action -->
                    <button id="sb-btn" class="btn btn-gold disabled" disabled onclick="performCentralSearch()">
                        Search Now
                    </button>
                </div>
            </div>
        </section>

        <!-- RESULTS VIEW OVERLAY -->
        <div id="results-view" class="results-view-overlay">
            <div class="results-header-bar">
                <button class="back-btn" onclick="closeResultsView()">
                    ← Back to Home
                </button>
                <div class="results-title-box">
                    <h2 id="results-heading">Results</h2>
                    <p id="results-subheading" class="text-gold">Showing compatible parts</p>
                </div>
            </div>

            <div class="results-container">
                <!-- Filters Sidebar -->
                <aside class="results-filters">
                    <h3>Categories</h3>
                    <ul id="results-filter-list">
                        <!-- Populated by JS -->
                    </ul>
                </aside>

                <!-- Grid -->
                <main class="results-main">
                    <div class="results-grid" id="main-results-grid">
                        <!-- Populated by JS -->
                    </div>
                </main>
            </div>
        </div>


        <!-- Brand Dedicated Tabs -->
        <section id="brands" class="tabs-section">
            <div class="section-header reveal">
                <h2>Shop By Your Brand</h2>
                <div style="width: 60px; height: 3px; background-color: var(--gold-primary); margin: 1rem auto;"></div>
            </div>

            <div class="tabs-nav reveal" id="brand-tabs-nav">
                <!-- Populated by JS -->
            </div>

            <div id="brand-tabs-content" class="reveal">
                <!-- Content Populated by JS -->
            </div>
        </section>
        </div>
        </section>

        <!-- Best Sellers / Featured -->
        <section id="featured" class="brands-section" style="background-color: var(--navy-primary);">
            <div class="section-header reveal">
                <h2>Best Selling Car Accessories</h2>
                <div style="width: 60px; height: 3px; background-color: var(--gold-primary); margin: 1rem auto;"></div>
            </div>
            <div class="results-grid" id="featured-grid">
                <!-- Static Featured Items -->
                <div class="product-card reveal">
                    <div class="prod-img"
                        style="background-image: url('https://images.unsplash.com/photo-1553440569-bcc63803a83d?auto=format&fit=crop&q=80&w=400')">
                    </div>
                    <div class="prod-info">
                        <div class="prod-cat">Lighting</div>
                        <h4 class="prod-title">Land Cruiser LED Upgrade Kit</h4>
                        <div class="prod-price">QAR 850</div>
                        <button class="btn btn-gold" style="width:100%"
                            onclick="openQuickView({name:'Land Cruiser LED Upgrade Kit', price:'850', cat:'Lighting'})">Quick
                            View</button>
                    </div>
                </div>
                <div class="product-card reveal">
                    <div class="prod-img"
                        style="background-image: url('https://images.unsplash.com/photo-1605218427368-35b868ccd699?auto=format&fit=crop&q=80&w=400')">
                    </div>
                    <div class="prod-info">
                        <div class="prod-cat">Suspension</div>
                        <h4 class="prod-title">Nissan Patrol Lift Kit 2.0</h4>
                        <div class="prod-price">QAR 3200</div>
                        <button class="btn btn-gold" style="width:100%"
                            onclick="openQuickView({name:'Nissan Patrol Lift Kit 2.0', price:'3200', cat:'Suspension'})">Quick
                            View</button>
                    </div>
                </div>
                <div class="product-card reveal">
                    <div class="prod-img"
                        style="background-image: url('https://images.unsplash.com/photo-1503376763036-066120622c74?auto=format&fit=crop&q=80&w=400')">
                    </div>
                    <div class="prod-info">
                        <div class="prod-cat">Body</div>
                        <h4 class="prod-title">Lexus LX Front Bumper Kit</h4>
                        <div class="prod-price">QAR 1800</div>
                        <button class="btn btn-gold" style="width:100%"
                            onclick="openQuickView({name:'Lexus LX Front Bumper Kit', price:'1800', cat:'Body'})">Quick
                            View</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Part Request Form -->
        <section id="request-part" class="request-section">
            <div class="section-header reveal">
                <h2>Can't Find Your Part?</h2>
                <p class="text-secondary">Tell us what you need and we'll source it for you — guaranteed.</p>
            </div>
            <div class="request-form-container reveal">
                <div class="form-row">
                    <div class="form-group" style="flex:1">
                        <label class="form-label">Car Brand</label>
                        <select class="form-control" id="req-brand" onchange="updateReqModels()">
                            <option value="">Select Brand</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex:1">
                        <label class="form-label">Car Model</label>
                        <select class="form-control" id="req-model">
                            <option value="">Select Model</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Part Name (Detailed)</label>
                    <input type="text" class="form-control" id="req-part"
                        placeholder="e.g. Front Right Headlight Assembly">
                </div>
                <div class="form-group">
                    <label class="form-label">Your Name</label>
                    <input type="text" class="form-control" id="req-name" placeholder="John Doe">
                </div>
                <div class="form-group">
                    <label class="form-label">Notes (Optional)</label>
                    <textarea class="form-control" id="req-notes" rows="3"
                        placeholder="Any specific details..."></textarea>
                </div>
                <button class="btn btn-gold" style="width:100%" onclick="sendPartRequest()">Send Request on
                    WhatsApp</button>
                <p style="text-align:center; margin-top:1rem; font-size:0.8rem; color:var(--text-secondary)">We
                    typically respond within minutes during business hours ⚡</p>
            </div>
        </section>

        <!-- About Us Section (Replaces Gallery) -->
        <section id="about" class="gallery-section">
            <div class="section-header reveal">
                <h2>Our Story</h2>
                <div style="width: 60px; height: 3px; background-color: var(--gold-primary); margin: 1rem auto;"></div>
            </div>
            <div class="reveal"
                style="max-width: 800px; margin: 0 auto; text-align: center; line-height: 1.8; color: var(--text-secondary);">
                <p style="margin-bottom: 1.5rem; font-size: 1.1rem;">
                    For over 20 years, we have been one of Doha's most trusted destinations for genuine car accessories
                    and parts.
                    What started as a passion for automobiles has grown into a legacy built on reliability, expertise,
                    and an unwavering commitment to quality.
                </p>
                <p style="margin-bottom: 1.5rem; font-size: 1.1rem;">
                    Having proudly served more than 5,000 customers across Qatar, we understand that when it comes to
                    your vehicle,
                    nothing less than the best will do. That's why every product we supply is 100% genuine — no
                    compromises, no shortcuts.
                </p>
                <p style="font-size: 1.1rem; color: var(--gold-primary); font-weight: 500;">
                    Our customers keep coming back not just for our parts, but for the peace of mind that comes with
                    every purchase.
                    At our store, your satisfaction isn't just a goal — it's our standard.
                </p>
            </div>
        </section>

        <!-- Parallax Divider 2 -->
        <div class="parallax-divider" id="parallax-2" style="background-image: url('PLACEHOLDER');">
            <div class="parallax-overlay reveal">
                <h3>Built for the Desert</h3>
                <p class="text-gold">Proven Performance in Qatar's Harshest Conditions</p>
            </div>
        </div>

        <!-- Legacy / Why Choose Us -->
        <section id="legacy" class="legacy-section">
            <div class="section-header reveal">
                <h2>The Al Rafa Car Accessories Legacy</h2>
                <div style="width: 60px; height: 3px; background-color: var(--gold-primary); margin: 1rem auto;"></div>
                <p class="text-secondary" style="max-width:600px; margin:0 auto;">
                    Since 2005, we have been the trusted name for genuine auto parts in Doha.
                    We don't just sell parts; we provide reliability.
                </p>
            </div>
            <div class="legacy-grid reveal" id="legacy-counters">
                <div class="legacy-item">
                    <h3 data-target="25">0</h3>
                    <p>Years Experience</p>
                </div>
                <div class="legacy-item">
                    <h3 data-target="5000">0</h3>
                    <p>Customers Served</p>
                </div>
                <div class="legacy-item">
                    <h3 data-target="100">0</h3>
                    <p>% Genuine Parts</p>
                </div>
            </div>
        </section>

        <!-- Testimonials -->
        <section id="testimonials" class="testimonials-section">
            <div class="section-header reveal">
                <h2>What Enthusiasts Say</h2>
            </div>
            <div class="results-grid reveal">
                <div class="testimonial-card">
                    <div class="quote-icon">❝</div>
                    <p class="text-secondary" style="margin-bottom:1rem">"Found the exact lift kit for my Patrol waiting
                        for me. Best prices in Doha hands down."</p>
                    <h4 class="text-gold">Mohammed Al-Thani</h4>
                    <p style="font-size:0.8rem">Nissan Patrol Owner</p>
                </div>
                <div class="testimonial-card">
                    <div class="quote-icon">❝</div>
                    <p class="text-secondary" style="margin-bottom:1rem">"Their WhatsApp service is instant. Confirmed
                        the part, paid, and picked it up same day."</p>
                    <h4 class="text-gold">Ahmed K.</h4>
                    <p style="font-size:0.8rem">Toyota Land Cruiser Owner</p>
                </div>
                <div class="testimonial-card">
                    <div class="quote-icon">❝</div>
                    <p class="text-secondary" style="margin-bottom:1rem">"Genuine parts only. I don't trust anyone else
                        with my Lexus."</p>
                    <h4 class="text-gold">Sarah J.</h4>
                    <p style="font-size:0.8rem">Lexus LX570 Owner</p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="contact-section">
            <div class="section-header reveal">
                <h2>Visit Our Showroom</h2>
            </div>
            <div class="contact-grid reveal">
                <div>
                    <div class="contact-info-item">
                        <div class="contact-icon">📍</div>
                        <div>
                            <h4 class="text-beige">Address</h4>
                            <p class="text-secondary">Al Ittihad St, Doha, Qatar</p>
                            <a href="https://goo.gl/maps/PLACEHOLDER" target="_blank" class="text-gold"
                                style="font-size:0.9rem">Get Directions →</a>
                        </div>
                    </div>
                    <div class="contact-info-item">
                        <div class="contact-icon">📞</div>
                        <div>
                            <h4 class="text-beige">Phone</h4>
                            <p class="text-secondary">+974 5584 3969</p>
                            <p class="text-secondary">+974 4444 0000</p>
                        </div>
                        <h4 class="text-beige">Working Hours</h4>
                        <p class="text-secondary">Sat - Thu: 8:00 AM - 12:00 AM</p>
                        <p class="text-secondary">Friday: 4:00 PM - 10:00 PM</p>
                    </div>
                </div>
            </div>
            <!-- Simple Map Placeholder (iframe) -->
            <div
                style="background:#112240; border-radius:8px; overflow:hidden; min-height:300px; display:flex; align-items:center; justify-content:center; border:1px solid var(--navy-secondary)">
                <p class="text-secondary">Google Map Embed Here</p>
            </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div style="display:flex; justify-content:center; align-items:center; gap:1rem; margin-bottom:2rem">
            <h2 class="heading-font" style="color:var(--gold-primary); margin:0">AL RAFA CAR ACCESSORIES</h2>
        </div>
        <div class="footer-links">
            <a href="#hero">Home</a>
            <a href="#search">Find Parts</a>
            <a href="#brands">Brands</a>
            <a href="#about">About Us</a>
            <a href="#contact">Contact</a>
        </div>
        <div style="display:flex; justify-content:center; gap:1.5rem; margin-bottom:2rem">
            <!-- Social Icons -->
            <a href="#" class="text-gold" style="font-size:1.5rem">Instagram</a>
            <a href="#" class="text-gold" style="font-size:1.5rem">Snapchat</a>
            <a href="#" class="text-gold" style="font-size:1.5rem">WhatsApp</a>
        </div>
        <p class="text-secondary" style="font-size:0.8rem">© 2025 Al Rafa Car Accessories. All Rights Reserved. Built
            for Qatar's Car Community.</p>
    </footer>

    <!-- Quick View Modal -->
    <div id="quick-view-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="closeQuickView()">×</button>
            <div class="modal-img-col" id="qv-img"></div>
            <div class="modal-info-col">
                <div class="prod-cat heading-font" id="qv-cat" style="color:var(--gold-primary)">CATEGORY</div>
                <h2 id="qv-title" style="margin: 0.5rem 0; color: var(--navy-primary); color:var(--beige-primary)">
                    Product Name</h2>
                <div id="qv-badge" class="compatibility-badge">Fits Toyota</div>
                <p id="qv-desc" style="color:var(--text-secondary); margin: 1.5rem 0;">
                    Genuine high-quality automotive part designed for performance and durability. Tested rigorously for
                    Qatar's conditions.
                </p>
                <div class="modal-specs">
                    <ul>
                        <li>Genuine OEM Specs</li>
                        <li>1 Year Warranty</li>
                        <li>Professional Installation Available</li>
                    </ul>
                </div>
                <h3 id="qv-price" class="text-gold" style="margin-bottom:2rem">QAR 000</h3>
                <button id="qv-btn" class="btn btn-whatsapp" style="width:100%;">Enquire on WhatsApp</button>
            </div>
        </div>
    </div>

    <!-- Mobile Sticky Split Bar -->
    <div id="mobile-sticky-bar">
        <a href="https://wa.me/97455843969" target="_blank" class="sticky-btn sticky-whatsapp">
            <span>WhatsApp</span>
        </a>
        <a href="tel:+97455843969" class="sticky-btn sticky-call">
            <span>Call Us</span>
        </a>
    </div>

    <script>
        // ============================================================
        // 🖼️ IMAGE CONFIGURATION
        // ============================================================
        const SITE_IMAGES = {
            logo: '',
            loading_logo: '',
            hero_background: 'https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?auto=format&fit=crop&q=80&w=1920', // Land Cruiser Desert
            parallax_1: 'https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?auto=format&fit=crop&q=80&w=1920', // Dark Engine
            parallax_2: 'https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?auto=format&fit=crop&q=80&w=1920', // Speed
            parallax_3: 'https://images.unsplash.com/photo-1494976388531-d1058494cdd8?auto=format&fit=crop&q=80&w=1920',
            brand_logos: {
                Toyota: 'https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Toyota_carlogo.svg/1024px-Toyota_carlogo.svg.png',
                Nissan: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Nissan_logo.png/1024px-Nissan_logo.png',
                Lexus: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Lexus_logo_2023.svg/1024px-Lexus_logo_2023.svg.png',
                Chevrolet: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/Chevrolet_logo.png/1024px-Chevrolet_logo.png',
                Jeep: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Jeep_Logo.svg/1024px-Jeep_Logo.svg.png',
                Volkswagen: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/6d/Volkswagen_logo_2019.svg/1024px-Volkswagen_logo_2019.svg.png',
            },
            brand_banners: {
                Toyota: 'https://images.unsplash.com/photo-1582029704222-29774a3f295b?auto=format&fit=crop&q=80&w=1200',
                Nissan: 'https://images.unsplash.com/photo-1605218427368-35b868ccd699?auto=format&fit=crop&q=80&w=1200', // GTR
                Lexus: 'https://images.unsplash.com/photo-1532155099834-453716a56e79?auto=format&fit=crop&q=80&w=1200',
                Chevrolet: 'https://images.unsplash.com/photo-1552519507-da8b1227ad4a?auto=format&fit=crop&q=80&w=1200',
                Jeep: 'https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?auto=format&fit=crop&q=80&w=1200',
                Volkswagen: 'https://images.unsplash.com/photo-1526726538690-5cbf956ae2fd?auto=format&fit=crop&q=80&w=1200',
            },
            model_thumbnails: {
                'default': 'https://images.unsplash.com/photo-1553440569-bcc63803a83d?auto=format&fit=crop&q=80&w=300'
            },
            categories: {
                'Bumpers': 'https://images.unsplash.com/photo-1550474681-34440368b556',
                // ... placeholders for others can default to generic
            },
            products: {
                'product_001': 'https://images.unsplash.com/photo-1553440569-bcc63803a83d',
                'product_002': 'https://images.unsplash.com/photo-1605218427368-35b868ccd699',
                'product_003': 'https://images.unsplash.com/photo-1503376763036-066120622c74',
            },
            shop: {
                exterior: 'https://images.unsplash.com/photo-1486262715619-67b85e0b08d3',
                interior: 'https://images.unsplash.com/photo-1492144534655-ae79c964c9d7',
                team: 'PLACEHOLDER_TEAM_PHOTO',
                workshop: 'PLACEHOLDER_WORKSHOP',
            },
            testimonials: {
                customer_1: 'https://ui-avatars.com/api/?name=Ali+H&background=D4AF37&color=fff',
                customer_2: 'https://ui-avatars.com/api/?name=Sarah+M&background=D4AF37&color=fff',
                customer_3: 'https://ui-avatars.com/api/?name=Mohd+K&background=D4AF37&color=fff',
            },
        };

        // ============================================================
        // 🚗 BRAND DATA OBJECT
        // ============================================================
        const carData = {
            Toyota: {
                logo: SITE_IMAGES.brand_logos.Toyota,
                models: {
                    'Land Cruiser': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Prado': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Hilux': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Camry': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Corolla': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Fortuner': { years: Array.from({ length: 18 }, (_, i) => 2006 + i) },
                    'Yaris': { years: Array.from({ length: 22 }, (_, i) => 2002 + i) },
                    'RAV4': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                }
            },
            Nissan: {
                logo: SITE_IMAGES.brand_logos.Nissan,
                models: {
                    'Patrol': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Navara': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Altima': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Sunny': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'X-Trail': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Pathfinder': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Kicks': { years: Array.from({ length: 8 }, (_, i) => 2017 + i) },
                    'Armada': { years: Array.from({ length: 20 }, (_, i) => 2004 + i) },
                }
            },
            Lexus: {
                logo: SITE_IMAGES.brand_logos.Lexus,
                models: {
                    'LX 570': { years: Array.from({ length: 16 }, (_, i) => 2008 + i) },
                    'LX 600': { years: Array.from({ length: 4 }, (_, i) => 2022 + i) },
                    'GX 460': { years: Array.from({ length: 15 }, (_, i) => 2010 + i) },
                    'RX 350': { years: Array.from({ length: 18 }, (_, i) => 2006 + i) },
                    'ES 350': { years: Array.from({ length: 18 }, (_, i) => 2006 + i) },
                    'IS 300': { years: Array.from({ length: 20 }, (_, i) => 2005 + i) },
                    'LS 500': { years: Array.from({ length: 7 }, (_, i) => 2018 + i) },
                    'NX 300': { years: Array.from({ length: 10 }, (_, i) => 2015 + i) },
                }
            },
            Chevrolet: {
                logo: SITE_IMAGES.brand_logos.Chevrolet,
                models: {
                    'Tahoe': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Suburban': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Silverado': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Camaro': { years: Array.from({ length: 15 }, (_, i) => 2010 + i) },
                    'Malibu': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Captiva': { years: Array.from({ length: 18 }, (_, i) => 2006 + i) },
                    'Blazer': { years: Array.from({ length: 6 }, (_, i) => 2019 + i) },
                    'Traverse': { years: Array.from({ length: 16 }, (_, i) => 2009 + i) },
                }
            },
            Jeep: {
                logo: SITE_IMAGES.brand_logos.Jeep,
                models: {
                    'Wrangler': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Grand Cherokee': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Cherokee': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Compass': { years: Array.from({ length: 18 }, (_, i) => 2007 + i) },
                    'Renegade': { years: Array.from({ length: 10 }, (_, i) => 2015 + i) },
                    'Gladiator': { years: Array.from({ length: 5 }, (_, i) => 2020 + i) },
                }
            },
            Volkswagen: {
                logo: SITE_IMAGES.brand_logos.Volkswagen,
                models: {
                    'Golf': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Passat': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Tiguan': { years: Array.from({ length: 17 }, (_, i) => 2008 + i) },
                    'Touareg': { years: Array.from({ length: 22 }, (_, i) => 2003 + i) },
                    'Polo': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Jetta': { years: Array.from({ length: 25 }, (_, i) => 2000 + i) },
                    'Arteon': { years: Array.from({ length: 7 }, (_, i) => 2018 + i) },
                    'T-Roc': { years: Array.from({ length: 7 }, (_, i) => 2018 + i) },
                }
            }
        };

        // ============================================================
        // 🚀 LOADING SCREEN LOGIC
        // ============================================================
        document.addEventListener('DOMContentLoaded', () => {
            const hasVisited = sessionStorage.getItem('alRafaVisited');
            // Remove 'hasVisited' check for development so I can see it every reload
            // In prod: if (!hasVisited) { ... }

            // Start Logic
            runLoadingAnimation();
            initCustomCursor();
            initNavbar();
            initNavbar();
            initHero();
            initDynamicImages();
            initCentralSearch();
            initBrandTabs();
            initPartRequestForm();
            initLegacyCounters();
            initScrollAnimations();
        });

        // ============================================================
        // 🔍 CENTRAL SEARCH BAR LOGIC
        // ============================================================
        const COMMON_PARTS = [
            "Headlight", "Taillight", "Bumper (Front)", "Bumper (Rear)",
            "Brake Pads", "Shock Absorber", "Radiator", "Alternator",
            "Spark Plugs", "Oil Filter", "Air Filter", "Battery",
            "Door Handle", "Mirror (Side)", "Grille", "Fog Light"
        ];

        function initCentralSearch() {
            const brandSelect = document.getElementById('sb-brand');
            Object.keys(carData).forEach(brand => {
                const opt = document.createElement('option');
                opt.value = brand;
                opt.innerText = brand;
                brandSelect.appendChild(opt);
            });

            // Populate Part Options
            const partList = document.getElementById('part-options');
            COMMON_PARTS.forEach(part => {
                const opt = document.createElement('option');
                opt.value = part;
                partList.appendChild(opt);
            });
        }

        function onSearchBrandSelect() {
            const brand = document.getElementById('sb-brand').value;
            const modelWrapper = document.getElementById('sb-model-wrapper');
            const modelSelect = document.getElementById('sb-model');
            const yearWrapper = document.getElementById('sb-year-wrapper');
            const yearSelect = document.getElementById('sb-year');
            const partWrapper = document.getElementById('sb-part-wrapper');
            const partInput = document.getElementById('sb-part');
            const btn = document.getElementById('sb-btn');

            // Reset downstream
            modelSelect.innerHTML = '<option value="">Select Model...</option>';
            modelSelect.disabled = true;
            modelWrapper.classList.add('disabled');
            yearSelect.innerHTML = '<option value="">Select Year...</option>';
            yearSelect.disabled = true;
            yearWrapper.classList.add('disabled');
            partInput.value = '';
            partInput.disabled = true;
            partInput.placeholder = "Select Year first...";
            partWrapper.classList.add('disabled');
            btn.disabled = true;
            btn.classList.add('disabled');

            if (brand && carData[brand]) {
                // Populate Models
                const models = Object.keys(carData[brand].models);
                models.forEach(model => {
                    const opt = document.createElement('option');
                    opt.value = model;
                    opt.innerText = model;
                    modelSelect.appendChild(opt);
                });

                // Enable Model Input
                modelSelect.disabled = false;
                modelWrapper.classList.remove('disabled');

                // Add listener for model change to enable year
                modelSelect.onchange = () => {
                    if (modelSelect.value) {
                        // Populate Years (Generic 2000-2025 for now)
                        yearSelect.innerHTML = '<option value="">Select Year...</option>';
                        for (let y = 2025; y >= 2000; y--) {
                            const opt = document.createElement('option');
                            opt.value = y;
                            opt.innerText = y;
                            yearSelect.appendChild(opt);
                        }
                        yearSelect.disabled = false;
                        yearWrapper.classList.remove('disabled');
                    } else {
                        yearSelect.disabled = true;
                        yearWrapper.classList.add('disabled');
                        partInput.disabled = true;
                        partWrapper.classList.add('disabled');
                        btn.disabled = true;
                        btn.classList.add('disabled');
                    }
                };

                // Add listener for year change to enable part & button
                yearSelect.onchange = () => {
                    if (yearSelect.value) {
                        partInput.disabled = false;
                        partInput.placeholder = "e.g. Headlight";
                        partWrapper.classList.remove('disabled');
                        btn.disabled = false; // Can search without part too
                        btn.classList.remove('disabled');
                    } else {
                        partInput.disabled = true;
                        partInput.placeholder = "Select Year first...";
                        partWrapper.classList.add('disabled');
                        btn.disabled = true;
                        btn.classList.add('disabled');
                    }
                };
            }
        }

        function performCentralSearch() {
            const brand = document.getElementById('sb-brand').value;
            const model = document.getElementById('sb-model').value;
            const year = document.getElementById('sb-year').value;
            const part = document.getElementById('sb-part').value;

            if (!brand || !model || !year) return;

            showResultsView(brand, model, year, part);
        }

        // ============================================================
        // 📊 RESULTS VIEW LOGIC
        // ============================================================
        function showResultsView(brand, model, year, part) {
            const view = document.getElementById('results-view');
            const grid = document.getElementById('main-results-grid');
            const heading = document.getElementById('results-heading');
            const subheading = document.getElementById('results-subheading');
            const filterList = document.getElementById('results-filter-list');

            heading.innerText = `${brand} ${model} (${year})`;
            subheading.innerText = part ? `Showing results for "${part}"` : `Found 12 compatible parts in stock`;

            // Populate Filters (Mock)
            filterList.innerHTML = '';
            ['Body Kits', 'Lighting', 'Suspension', 'Engine', 'Interior'].forEach(cat => {
                filterList.innerHTML += `<li style="margin-bottom:0.5rem; cursor:pointer; color:var(--text-secondary)" onclick="this.style.color='var(--gold-primary)'">${cat}</li>`;
            });

            // Populate Grid (Mock Products)
            grid.innerHTML = '';
            // If part is specified, show fewer results to simulate filtering
            const count = part ? 4 : 8;

            for (let i = 1; i <= count; i++) {
                const productName = part ? `${brand} ${model} ${part} #${i}` : `${brand} ${model} Part #${i}`;
                const price = (200 * i).toString();
                const fits = `${brand} ${model} ${year}`;
                const qvData = JSON.stringify({
                    name: productName,
                    price: price,
                    cat: part || 'Search Result',
                    fits: fits
                }).replace(/'/g, "&#39;").replace(/"/g, "&quot;");

                // Use placeholder thumbnail
                const imgKey = 'product_00' + ((i % 3) + 1);
                const imgUrl = SITE_IMAGES.products[imgKey] || SITE_IMAGES.model_thumbnails.default;

                grid.innerHTML += `
                    <div class="product-card">
                        <div class="prod-img" style="background-image: url('${imgUrl}')"></div>
                        <div class="prod-info">
                            <div class="prod-cat">In Stock</div>
                            <h4 class="prod-title">${productName}</h4>
                            <div class="prod-price">QAR ${price}</div>
                            <div style="display:flex; gap:0.5rem">
                                <button class="btn btn-gold" style="flex:1; padding:0.5rem; font-size:0.8rem"
                                    onclick='openQuickView(${qvData})'>View</button>
                                <button class="btn btn-whatsapp" style="flex:1; padding:0.5rem; font-size:0.8rem" 
                                    onclick="enquireOnWhatsAppWithCar('${productName}', '${brand}', '${model} ${year}')">
                                    Chat
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            view.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeResultsView() {
            document.getElementById('results-view').classList.remove('active');
            document.body.style.overflow = '';
        }
        function initDynamicImages() {
            // Parallax 2 (we only added one divider in HTML, id="parallax-2")
            // If we had more we'd target them.
            const p2 = document.getElementById('parallax-2');
            if (p2 && SITE_IMAGES.parallax_2 !== 'PLACEHOLDER') {
                p2.style.backgroundImage = `url('${SITE_IMAGES.parallax_2}')`;
            } else if (p2) {
                p2.style.background = 'linear-gradient(rgba(10,22,40,0.7), rgba(10,22,40,0.7)), url("https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?auto=format&fit=crop&q=80&w=2070")';
                p2.style.backgroundSize = 'cover';
                p2.style.backgroundAttachment = 'fixed';
            }
        }

        // --- Scroll Animations (Reveal) ---
        function initScrollAnimations() {
            const reveals = document.querySelectorAll('.reveal');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                        // Optional: unobserve if you want it to happen only once
                        // observer.unobserve(entry.target); 
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: "0px 0px -50px 0px"
            });

            reveals.forEach(el => observer.observe(el));
        }




        // --- Legacy Counters (Intersection Observer) ---
        function initLegacyCounters() {
            const counters = document.querySelectorAll('.legacy-item h3');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const target = +entry.target.getAttribute('data-target');
                        animateCounter(entry.target, target);
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });

            counters.forEach(c => observer.observe(c));
        }

        function animateCounter(el, target) {
            let current = 0;
            const increment = target / 50; // Speed
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                    el.innerText = target + (target > 100 ? '+' : '');
                } else {
                    el.innerText = Math.ceil(current);
                }
            }, 30);
        }


        // ... (Smart Search Logic) ...

        // Update renderResults methods to use openQuickView
        // Note: The previous renderResults and switchBrandTab had buttons. 
        // We will define openQuickView globally so they work.

        // ============================================================
        // 🛍️ QUICK VIEW MODAL LOGIC (Feature 3)
        // ============================================================
        function openQuickView(data) {
            // Data can be object or params. For search/grid buttons we passed args
            // But here I'm handling a generic object.
            // If calling from HTML string: openQuickView({name: '...', ...})

            const modal = document.getElementById('quick-view-modal');

            document.getElementById('qv-title').innerText = data.name || 'Product';
            document.getElementById('qv-price').innerText = 'QAR ' + (data.price || 'Ask');
            document.getElementById('qv-cat').innerText = data.cat || 'Accessory';

            const badge = document.getElementById('qv-badge');
            if (data.fits) {
                badge.style.display = 'inline-block';
                badge.innerText = `Fits ${data.fits}`;
            } else {
                badge.style.display = 'none';
            }

            // Update WhatsApp Button
            const btn = document.getElementById('qv-btn');
            const note = data.fits ? ` for ${data.fits}` : '';
            btn.onclick = () => enquireOnWhatsApp(`I am interested in *${data.name}*${note}. Price: ${data.price}`);

            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Lock Body Scroll
        }

        function closeQuickView() {
            document.getElementById('quick-view-modal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close on outside click
        document.getElementById('quick-view-modal').addEventListener('click', (e) => {
            if (e.target.id === 'quick-view-modal') closeQuickView();
        });

        // ============================================================
        // 🔍 CENTRAL SEARCH BAR LOGIC
        // ============================================================
        function initCentralSearch() {
            const brandSelect = document.getElementById('sb-brand');
            Object.keys(carData).forEach(brand => {
                const opt = document.createElement('option');
                opt.value = brand;
                opt.innerText = brand;
                brandSelect.appendChild(opt);
            });
        }

        function onSearchBrandSelect() {
            const brand = document.getElementById('sb-brand').value;
            const modelWrapper = document.getElementById('sb-model-wrapper');
            const modelSelect = document.getElementById('sb-model');
            const yearWrapper = document.getElementById('sb-year-wrapper');
            const yearSelect = document.getElementById('sb-year');
            const btn = document.getElementById('sb-btn');

            // Reset downstream
            modelSelect.innerHTML = '<option value="">Select Model...</option>';
            modelSelect.disabled = true;
            modelWrapper.classList.add('disabled');
            yearSelect.innerHTML = '<option value="">Select Year...</option>';
            yearSelect.disabled = true;
            yearWrapper.classList.add('disabled');
            btn.disabled = true;
            btn.classList.add('disabled');

            if (brand && carData[brand]) {
                // Populate Models
                const models = Object.keys(carData[brand].models);
                models.forEach(model => {
                    const opt = document.createElement('option');
                    opt.value = model;
                    opt.innerText = model;
                    modelSelect.appendChild(opt);
                });

                // Enable Model Input
                modelSelect.disabled = false;
                modelWrapper.classList.remove('disabled');

                // Add listener for model change to enable year
                modelSelect.onchange = () => {
                    if (modelSelect.value) {
                        // Populate Years (Generic 2000-2025 for now)
                        yearSelect.innerHTML = '<option value="">Select Year...</option>';
                        for (let y = 2025; y >= 2000; y--) {
                            const opt = document.createElement('option');
                            opt.value = y;
                            opt.innerText = y;
                            yearSelect.appendChild(opt);
                        }
                        yearSelect.disabled = false;
                        yearWrapper.classList.remove('disabled');
                    } else {
                        yearSelect.disabled = true;
                        yearWrapper.classList.add('disabled');
                    }
                };

                // Add listener for year change to enable button
                yearSelect.onchange = () => {
                    if (yearSelect.value) {
                        btn.disabled = false;
                        btn.classList.remove('disabled');
                    } else {
                        btn.disabled = true;
                        btn.classList.add('disabled');
                    }
                };
            }
        }

        function performCentralSearch() {
            const brand = document.getElementById('sb-brand').value;
            const model = document.getElementById('sb-model').value;
            const year = document.getElementById('sb-year').value;

            if (!brand || !model || !year) return;

            showResultsView(brand, model, year);
        }

        // ============================================================
        // 📊 RESULTS VIEW LOGIC
        // ============================================================
        function showResultsView(brand, model, year) {
            const view = document.getElementById('results-view');
            const grid = document.getElementById('main-results-grid');
            const heading = document.getElementById('results-heading');
            const subheading = document.getElementById('results-subheading');
            const filterList = document.getElementById('results-filter-list');

            heading.innerText = `${brand} ${model} (${year})`;
            subheading.innerText = `Found 12 compatible parts in stock`;

            // Populate Filters (Mock)
            filterList.innerHTML = '';
            ['Body Kits', 'Lighting', 'Suspension', 'Engine', 'Interior'].forEach(cat => {
                filterList.innerHTML += `<li style="margin-bottom:0.5rem; cursor:pointer; color:var(--text-secondary)" onclick="this.style.color='var(--gold-primary)'">${cat}</li>`;
            });

            // Populate Grid (Mock Products)
            grid.innerHTML = '';
            for (let i = 1; i <= 8; i++) {
                const productName = `${brand} ${model} Part #${i}`;
                const price = (200 * i).toString();
                const fits = `${brand} ${model} ${year}`;
                const qvData = JSON.stringify({
                    name: productName,
                    price: price,
                    cat: 'Search Result',
                    fits: fits
                }).replace(/'/g, "&#39;").replace(/"/g, "&quot;");

                // Use placeholder thumbnail
                const imgKey = 'product_00' + ((i % 3) + 1);
                const imgUrl = SITE_IMAGES.products[imgKey] || SITE_IMAGES.model_thumbnails.default;

                grid.innerHTML += `
                    <div class="product-card">
                        <div class="prod-img" style="background-image: url('${imgUrl}')"></div>
                        <div class="prod-info">
                            <div class="prod-cat">In Stock</div>
                            <h4 class="prod-title">${productName}</h4>
                            <div class="prod-price">QAR ${price}</div>
                            <div style="display:flex; gap:0.5rem">
                                <button class="btn btn-gold" style="flex:1; padding:0.5rem; font-size:0.8rem"
                                    onclick='openQuickView(${qvData})'>View</button>
                                <button class="btn btn-whatsapp" style="flex:1; padding:0.5rem; font-size:0.8rem" 
                                    onclick="enquireOnWhatsAppWithCar('${productName}', '${brand}', '${model} ${year}')">
                                    Chat
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            view.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeResultsView() {
            document.getElementById('results-view').classList.remove('active');
            document.body.style.overflow = '';
        }

        // ============================================================
        // 📝 PART REQUEST FORM (Feature 6)
        // ============================================================
        function initPartRequestForm() {
            const brandSelect = document.getElementById('req-brand');
            Object.keys(carData).forEach(brand => {
                const opt = document.createElement('option');
                opt.value = brand;
                opt.innerText = brand;
                brandSelect.appendChild(opt);
            });
        }

        function updateReqModels() {
            const brand = document.getElementById('req-brand').value;
            const modelSelect = document.getElementById('req-model');
            modelSelect.innerHTML = '<option value="">Select Model</option>';

            if (brand && carData[brand]) {
                const models = Object.keys(carData[brand].models);
                models.forEach(model => {
                    const opt = document.createElement('option');
                    opt.value = model;
                    opt.innerText = model;
                    modelSelect.appendChild(opt);
                });
            }
        }

        function sendPartRequest() {
            const brand = document.getElementById('req-brand').value;
            const model = document.getElementById('req-model').value;
            const part = document.getElementById('req-part').value;
            const name = document.getElementById('req-name').value;
            const notes = document.getElementById('req-notes').value;

            if (!brand || !model || !part || !name) {
                alert('Please fill in all required fields.');
                return;
            }

            const message = `Hi Al Rafa! 👋 My name is *${name}* and I'm looking for a part for my *${brand} ${model}*.\n\n🔧 *Part Required:* ${part}\n📝 *Additional Notes:* ${notes || 'None'}\n\nCould you please help me source this part? Thank you!`;
            window.open(`https://wa.me/97455843969?text=${encodeURIComponent(message)}`, '_blank');
        }

        // ============================================================
        // 🏷️ BRAND TABS LOGIC (Feature 5)
        // ============================================================
        function initBrandTabs() {
            const nav = document.getElementById('brand-tabs-nav');
            const brands = Object.keys(carData);

            // Create Tabs
            brands.forEach((brand, index) => {
                const btn = document.createElement('button');
                btn.className = `tab-btn ${index === 0 ? 'active' : ''}`;
                btn.innerText = brand;
                btn.onclick = () => switchBrandTab(brand);
                nav.appendChild(btn);
            });

            // Init First Tab
            switchBrandTab('Toyota');
        }

        function switchBrandTab(brand) {
            // Update Buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                if (btn.innerText === brand) btn.classList.add('active');
                else btn.classList.remove('active');
            });

            // Render Content
            const container = document.getElementById('brand-tabs-content');

            // Re-using product card logic but simplified for tabs
            // Generate some dummy products for this brand
            let productsHtml = '';
            for (let i = 1; i <= 4; i++) {
                const productName = `${brand} Part #${i}`;
                const price = (150 * i).toString();
                const qvData = JSON.stringify({
                    name: productName,
                    price: price,
                    cat: 'Recommended',
                    fits: brand
                }).replace(/'/g, "&#39;").replace(/"/g, "&quot;");

                // Use placeholder thumbnail
                const imgKey = 'product_00' + ((i % 3) + 1); // Cycle 1-3
                const imgUrl = SITE_IMAGES.products[imgKey] || SITE_IMAGES.model_thumbnails.default;

                productsHtml += `
                    <div class="product-card">
                        <div class="prod-img" style="background-image: url('${imgUrl}')"></div>
                        <div class="prod-info">
                            <div class="prod-cat">Recommended</div>
                            <h4 class="prod-title">${productName}</h4>
                            <div class="prod-price">QAR ${price}</div>
                            <div style="display:flex; gap:0.5rem">
                                <button class="btn btn-gold" style="flex:1; padding:0.5rem; font-size:0.8rem"
                                    onclick='openQuickView(${qvData})'>Quick View</button>
                                <button class="btn btn-whatsapp" style="flex:1; padding:0.5rem; font-size:0.8rem" 
                                    onclick="enquireOnWhatsAppWithCar('${productName}', '${brand}', 'General Model')">
                                    WhatsApp
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            container.innerHTML = `
                <div class="tab-content active">
                    <div class="brand-hero-banner" style="background-image: url('${SITE_IMAGES.brand_banners[brand] || ''}'); background-color: #112240;">
                        <div class="brand-hero-overlay">
                            <h3>${brand} Genuine Parts</h3>
                            <p class="text-gold">Browse our exclusive collection</p>
                        </div>
                    </div>
                    <div class="results-grid">
                        ${productsHtml}
                    </div>
                    <div style="text-align:center; margin-top:2rem;">
                         <button class="btn btn-gold" onclick="selectBrand('${brand}'); document.getElementById('search').scrollIntoView();">
                            See All ${brand} Parts
                         </button>
                    </div>
                </div>
            `;
        }


        function runLoadingAnimation() {
            const needle = document.getElementById('speed-needle');
            const progress = document.getElementById('load-progress');

            // Animate Needle
            setTimeout(() => {
                needle.style.transform = 'rotate(90deg)';
                progress.style.width = '100%';
            }, 100);

            // Particles for loader
            createParticles('loader-particles', 20);

            // Finish
            setTimeout(() => {
                document.body.classList.add('loaded');
                sessionStorage.setItem('alRafaVisited', 'true');

                // Trigger Hero Reveal after loader
                setTimeout(() => {
                    document.getElementById('hero-text').classList.add('visible');
                    document.querySelector('.scroll-indicator').classList.add('visible');
                }, 500);
            }, 2500);
        }

        function createParticles(containerId, count) {
            const container = document.getElementById(containerId);
            if (!container) return;

            for (let i = 0; i < count; i++) {
                const p = document.createElement('div');
                p.classList.add('particle');
                p.style.left = Math.random() * 100 + '%';
                p.style.top = Math.random() * 100 + '%';
                p.style.width = (Math.random() * 5 + 2) + 'px';
                p.style.height = p.style.width;
                p.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(p);
            }
        }

        function initHero() {
            // Set Background
            const heroBg = document.getElementById('hero-bg-img');
            if (SITE_IMAGES.hero_background !== 'PLACEHOLDER_HERO_CAR_IMAGE') {
                heroBg.style.backgroundImage = `url('${SITE_IMAGES.hero_background}')`;
            } else {
                // Fallback gradient if image not set
                heroBg.style.background = 'radial-gradient(circle at center, #1b2d48 0%, #0a1628 100%)';
            }

            // Particles
            createParticles('hero-particles', 30);
        }
        // ============================================================
        // 🖱️ CUSTOM CURSOR LOGIC
        // ============================================================
        function initCustomCursor() {
            const dot = document.getElementById('cursor-dot');
            const ring = document.getElementById('cursor-ring');

            let mouseX = 0, mouseY = 0;
            let ringX = 0, ringY = 0;

            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;

                // Dot follows immediately
                dot.style.left = mouseX + 'px';
                dot.style.top = mouseY + 'px';
            });

            // Lag effect for ring
            function animateRing() {
                ringX += (mouseX - ringX) * 0.15; // Smooth factor
                ringY += (mouseY - ringY) * 0.15;

                ring.style.left = ringX + 'px';
                ring.style.top = ringY + 'px';

                requestAnimationFrame(animateRing);
            }
            animateRing();

            // Hover interactions
            const interactables = document.querySelectorAll('a, button, .nav-logo');
            interactables.forEach(el => {
                el.addEventListener('mouseenter', () => document.body.classList.add('hovering-button'));
                el.addEventListener('mouseleave', () => document.body.classList.remove('hovering-button'));
            });
        }

        // ============================================================
        // 🧭 NAVBAR & MOBILE MENU LOGIC
        // ============================================================
        function initNavbar() {
            const nav = document.getElementById('main-nav');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    nav.classList.add('scrolled');
                } else {
                    nav.classList.remove('scrolled');
                }
            });
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('active');
            document.getElementById('mobile-backdrop').classList.toggle('active');
        }

        // ============================================================
        // 🌍 LANGUAGE / RTL LOGIC
        // ============================================================
        let currentLang = 'en';

        const TRANSLATIONS = {
            en: {
                home: 'Home',
                search: 'Find Parts',
                brands: 'Brands',
                featured: 'Featured',
                gallery: 'Gallery',
                contact: 'Contact',
                heroTitle: 'Genuine Parts.<br>Unmatched Reliability.',
                heroSub: 'The #1 Source for Toyota, Nissan & 4x4 Parts in Qatar.',
                reqTitle: "Can't Find Your Part?",
                reqSub: "Tell us what you need and we'll source it for you."
            },
            ar: {
                home: 'الرئيسية',
                search: 'بحث عن قطع',
                brands: 'المركبات',
                featured: 'مميز',
                gallery: 'المعرض',
                contact: 'اتصل بنا',
                heroTitle: 'قطع غيار أصلية.<br>موسوقية لا تضاهى.',
                heroSub: 'المصدر الأول لقطع غيار تويوتا ونيسان في قطر.',
                reqTitle: "لم تجد قطعتك؟",
                reqSub: "أخبرنا بما تحتاجه وسنقوم بتوفيره لك."
            }
        };

        function toggleLanguage() {
            currentLang = currentLang === 'en' ? 'ar' : 'en';
            setLanguage(currentLang);
        }

        function setLanguage(lang) {
            // Document Direction
            document.documentElement.setAttribute('lang', lang);
            document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');

            // Text Content Updates (Simple Implementation)
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (TRANSLATIONS[lang][key]) {
                    el.innerText = TRANSLATIONS[lang][key];
                }
            });

            // Specific Header Updates (Manual target for complex HTML)
            if (lang === 'ar') {
                document.querySelector('.hero-title').innerHTML = TRANSLATIONS.ar.heroTitle;
                document.querySelector('.hero-subtitle').innerText = TRANSLATIONS.ar.heroSub;
                document.querySelector('#request-part h2').innerText = TRANSLATIONS.ar.reqTitle;
                document.querySelector('#request-part p').innerText = TRANSLATIONS.ar.reqSub;
            } else {
                document.querySelector('.hero-title').innerHTML = TRANSLATIONS.en.heroTitle;
                document.querySelector('.hero-subtitle').innerText = TRANSLATIONS.en.heroSub;
                document.querySelector('#request-part h2').innerText = TRANSLATIONS.en.reqTitle;
                document.querySelector('#request-part p').innerText = TRANSLATIONS.en.reqSub;
            }
        }


        // ============================================================
        // 💬 WHATSAPP HELPERS
        // ============================================================
        function enquireOnWhatsApp(message) {
            window.open(`https://wa.me/97455843969?text=${encodeURIComponent('Hi Al Rafa! 👋 ' + message)}`, '_blank');
        }

        // Removed old createParticles to avoid duplication with the new refactored one above
    </script>
</body>

</html>