<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <title>Al Rafa Car Accessories | Toyota, Nissan & 4x4 Specialists Doha</title>
    <meta name="description"
        content="One of Qatar's most trusted car accessories shops. Specialists in Toyota, Nissan, Lexus, Chevrolet, Jeep, and Volkswagen parts. Located on Al Ittihad St, Doha.">

    <!-- Schema.org Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "AutoPartsStore",
      "name": "Al Rafa Car Accessories",
      "image": "YOUR_LOGO_URL_HERE",
      "@id": "https://alrafa-qatar.com",
      "url": "https://alrafa-qatar.com",
      "telephone": "+97430496000",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Al Ittihad St",
        "addressLocality": "Doha",
        "addressCountry": "QA"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 25.2854, 
        "longitude": 51.5310
      },
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": [
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Saturday",
          "Sunday"
        ],
        "opens": "08:00",
        "closes": "00:00"
      },
      "sameAs": [
        "https://instagram.com/alrafa"
      ]
    }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <style>
        /* =========================================
           1. CSS VARIABLES & RESET
           ========================================= */
        :root {
            /* Colors - Matte Stealth Theme */
            --navy-primary: #121212;
            /* Deep Matte Black */
            --navy-secondary: #1E1E1E;
            /* Dark Charcoal */
            --beige-primary: #E0E0E0;
            /* Off-White/Silver text */
            --beige-secondary: #A0A0A0;
            /* Grey text */
            --gold-primary: #D4AF37;
            /* Metallic Gold (less yellow) */
            --gold-bright: #F4C430;
            --text-primary: #F0F0F0;
            --text-secondary: #B0B0B0;
            --card-bg: #1A1A1A;
            /* Slightly lighter black */
            --whatsapp-green: #25D366;
            --whatsapp-dark: #128C7E;

            /* Transitions */
            --ease-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-fast: 0.3s var(--ease-smooth);
            --transition-medium: 0.5s var(--ease-smooth);
            --transition-slow: 0.8s var(--ease-smooth);

            /* Typography */
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Poppins', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--navy-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: var(--font-heading);
            color: var(--beige-primary);
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        ul {
            list-style: none;
        }

        /* Helper Classes */
        .text-gold {
            color: var(--gold-primary);
        }

        .text-beige {
            color: var(--beige-primary);
        }

        .bg-navy {
            background-color: var(--navy-primary);
        }

        /* =========================================
           2. LOADING SCREEN (Feature 1)
           ========================================= */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--navy-primary);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: transform 0.8s var(--ease-smooth);
        }

        /* Logo Area */
        .loader-logo {
            font-family: var(--font-heading);
            font-size: 3rem;
            color: var(--beige-primary);
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s forwards 0.2s;
            text-shadow: 0 0 15px rgba(201, 168, 76, 0.3);
        }

        .loader-logo span {
            color: var(--gold-primary);
        }

        /* Speedometer Container */
        .speedometer-container {
            width: 200px;
            height: 100px;
            /* Half circle */
            border-top-left-radius: 110px;
            border-top-right-radius: 110px;
            border: 4px solid var(--navy-secondary);
            border-bottom: 0;
            position: relative;
            overflow: hidden;
            margin-bottom: 2rem;
        }

        .speedometer-fill {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-top-left-radius: 110px;
            border-top-right-radius: 110px;
            background: conic-gradient(from 270deg, transparent 50%, var(--gold-primary) 50%);
            transform-origin: bottom center;
            transform: rotate(-180deg);
            transition: transform 2s linear;
        }

        /* Needle */
        .speedometer-needle {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 4px;
            height: 90px;
            background-color: var(--gold-bright);
            transform-origin: bottom center;
            transform: rotate(-90deg);
            /* Start left */
            transition: transform 2s var(--ease-smooth);
            z-index: 2;
            box-shadow: 0 0 10px var(--gold-primary);
        }

        .needle-pivot {
            position: absolute;
            bottom: -10px;
            left: 50%;
            width: 20px;
            height: 20px;
            background-color: var(--gold-primary);
            border-radius: 50%;
            transform: translateX(-50%);
            z-index: 3;
        }

        /* Loading Bar */
        .loading-bar-container {
            width: 300px;
            height: 4px;
            background-color: var(--navy-secondary);
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }

        .loading-bar-progress {
            width: 0%;
            height: 100%;
            background-color: var(--gold-primary);
            box-shadow: 0 0 10px var(--gold-primary);
            transition: width 2.2s linear;
        }

        /* Particles */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            background-color: var(--gold-primary);
            border-radius: 50%;
            opacity: 0.5;
            animation: floatUp 3s infinite ease-in-out;
        }

        /* Loaded State */
        body.loaded #loading-screen {
            transform: translateY(-100%);
        }

        /* Animations */
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(1);
                opacity: 0.5;
            }

            50% {
                opacity: 0.8;
            }

            100% {
                transform: translateY(-100px) scale(0);
                opacity: 0;
            }
        }

        /* =========================================
           3. CUSTOM CURSOR (Feature 2)
           ========================================= */
        /*
        @media (hover: hover) and (pointer: fine) {
            body {
                cursor: none;
            }

            #cursor-dot,
            #cursor-ring {
                display: block;
            }
        }
        */

        #cursor-dot {
            position: fixed;
            top: 0;
            left: 0;
            width: 8px;
            height: 8px;
            background-color: var(--gold-primary);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            display: none;
            /* Hidden on touch */
        }

        #cursor-ring {
            position: fixed;
            top: 0;
            left: 0;
            width: 24px;
            height: 24px;
            border: 1px solid var(--gold-primary);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9998;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s, background-color 0.3s;
            display: none;
            /* Hidden on touch */
        }

        /* Hover States for Cursor */
        body.hovering-button #cursor-dot {
            transform: translate(-50%, -50%) scale(1.5);
        }

        body.hovering-button #cursor-ring {
            width: 40px;
            height: 40px;
            background-color: rgba(201, 168, 76, 0.2);
        }

        /* =========================================
           4. NAVBAR (Sticky & Blur)
           ========================================= */
        #main-nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 1.5rem 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            background: rgba(10, 22, 40, 0.3);
            backdrop-filter: blur(8px);
            transition: padding 0.3s var(--ease-smooth), background 0.3s, backdrop-filter 0.3s;
        }

        #main-nav.scrolled {
            padding: 1rem 5%;
            background: rgba(10, 22, 40, 0.95);
            /* Navy Primary with opacity */
            backdrop-filter: blur(12px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .nav-logo {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .nav-logo span {
            color: var(--gold-primary);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            font-family: var(--font-body);
            font-size: 0.9rem;
            color: var(--text-primary);
            position: relative;
            padding: 5px 0;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0%;
            height: 2px;
            background-color: var(--gold-primary);
            transition: width 0.3s var(--ease-smooth);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-cta {
            padding: 0.6rem 1.2rem;
            background-color: transparent;
            border: 1px solid var(--gold-primary);
            color: var(--gold-primary);
            border-radius: 4px;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-cta:hover {
            background-color: var(--gold-primary);
            color: var(--navy-primary);
        }



        /* Language Toggle */
        .lang-btn {
            background: none;
            border: 1px solid var(--text-secondary);
            color: var(--text-secondary);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            font-family: var(--font-body);
            margin-left: 1rem;
            transition: 0.3s;
        }

        .lang-btn:hover {
            border-color: var(--gold-primary);
            color: var(--gold-primary);
        }

        /* Mobile Menu */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--gold-primary);
            cursor: pointer;
        }

        .mobile-menu-overlay {
            position: fixed;
            top: 0;
            right: -100%;
            /* Slide from right */
            width: 80%;
            height: 100vh;
            background-color: var(--navy-primary);
            z-index: 2000;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            transition: 0.4s var(--ease-smooth);
            border-left: 1px solid var(--gold-primary);
        }

        .mobile-menu-overlay.active {
            right: 0;
        }

        .mobile-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1500;
            opacity: 0;
            visibility: hidden;
            transition: 0.3s;
        }

        .mobile-backdrop.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-nav-link {
            font-size: 1.2rem;
            border-bottom: 1px solid var(--navy-secondary);
            padding-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
            }
        }

        /* RTL Overrides */
        [dir="rtl"] {
            text-align: right;
            font-family: 'Tahoma', sans-serif;
        }

        [dir="rtl"] .nav-cta {
            flex-direction: row-reverse;
        }

        [dir="rtl"] .slide-out-left {
            transform: translateX(100px);
        }

        [dir="rtl"] .slide-in-right {
            transform: translateX(-100px);
        }

        [dir="rtl"] .lang-btn {
            margin-left: 0;
            margin-right: 1rem;
        }


        /* =========================================
           5. MOBILE STICKY BAR (Feature 4)
           ========================================= */
        #mobile-sticky-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            display: flex;
            z-index: 2000;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.5);
            display: none;
            /* Desktop default */
        }

        @media (max-width: 768px) {
            #mobile-sticky-bar {
                display: flex;
            }
        }

        .sticky-btn {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            color: #fff;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        .sticky-whatsapp {
            background-color: var(--whatsapp-green);
            border-top-left-radius: 15px;
            /* Rounded pill edge effect */
        }

        .sticky-call {
            background-color: var(--gold-primary);
            color: var(--navy-primary);
            border-top-right-radius: 15px;
        }

        /* =========================================
           6. HERO SECTION (Feature 3)
           ========================================= */
        .hero-section {
            height: 100vh;
            width: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background-color: var(--navy-primary);
            /* Fallback */
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            z-index: 0;
            /* Will be set by JS from SITE_IMAGES */
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(10, 22, 40, 0.9) 0%, rgba(10, 22, 40, 0.6) 50%, rgba(10, 22, 40, 0.4) 100%);
            z-index: 1;
        }

        .hero-content {
            position: relative;
            z-index: 10;
            text-align: center;
            max-width: 900px;
            padding: 0 20px;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s var(--ease-smooth), transform 1s var(--ease-smooth);
        }

        .hero-title {
            font-size: 3.8rem;
            line-height: 1.2;
            margin-bottom: 1.5rem;
            letter-spacing: 1px;
        }

        .hero-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 2.5rem;
            letter-spacing: 1px;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 1.15rem 2.8rem;
            border-radius: 4px;
            font-family: var(--font-body);
            font-weight: 600;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s var(--ease-smooth);
            position: relative;
            overflow: hidden;
            border: none;
            cursor: pointer;
            margin: 0 15px;
        }

        .btn-gold {
            background-color: var(--gold-primary);
            color: var(--navy-primary);
        }

        .btn-gold::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: 0.5s;
        }

        .btn-gold:hover::before {
            left: 100%;
        }

        .btn-gold:hover {
            background-color: #C19B2E;
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(201, 168, 76, 0.2);
        }

        .btn-whatsapp {
            background-color: transparent;
            border: 2px solid var(--whatsapp-green);
            color: var(--whatsapp-green);
        }

        .btn-whatsapp:hover {
            background-color: transparent;
            color: var(--whatsapp-green);
            transform: translateY(-3px);
            box-shadow: 0 0 20px rgba(37, 211, 102, 0.3);
        }

        /* Scroll Indicator */
        .scroll-indicator {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            opacity: 0;
            transition: opacity 1s 1s;
            animation: slowBounce 3s ease-in-out infinite;
        }

        @keyframes slowBounce {

            0%,
            100% {
                transform: translateX(-50%) translateY(0);
            }

            50% {
                transform: translateX(-50%) translateY(-8px);
            }
        }

        .mouse {
            width: 30px;
            height: 50px;
            border: 2px solid var(--gold-primary);
            border-radius: 20px;
            position: relative;
        }

        .wheel {
            width: 6px;
            height: 6px;
            background-color: var(--gold-primary);
            border-radius: 50%;
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            animation: scrollWheel 2s infinite;
        }

        @keyframes scrollWheel {
            0% {
                top: 10px;
                opacity: 1;
            }

            100% {
                top: 30px;
                opacity: 0;
            }
        }

        /* Use .visible class to trigger reveal */
        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* =========================================
           GLOBAL SECTION HEADERS
           ========================================= */
        .section-header {
            text-align: center;
            margin-bottom: 5rem;
        }

        .section-header h2 {
            font-size: 2.8rem;
            position: relative;
            display: inline-block;
            margin-bottom: 1.5rem;
            font-weight: 600;
            letter-spacing: 1px;
            color: var(--beige-primary);
        }

        .section-header h2::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 2px;
            background-color: var(--gold-primary);
        }

        .section-header p {
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* =========================================
           7. TRUST BAR
           ========================================= */
        .trust-bar-section {
            background-color: var(--navy-secondary);
            padding: 1.5rem 0;
            border-top: 1px solid rgba(201, 168, 76, 0.3);
            border-bottom: 1px solid rgba(201, 168, 76, 0.3);
            text-align: center;
            position: relative;
            z-index: 5;
        }

        .trust-bar-content {
            font-family: var(--font-body);
            font-size: 1rem;
            color: var(--beige-primary);
            font-weight: 500;
            letter-spacing: 1px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .trust-bar-content {
                gap: 1rem;
                font-size: 0.9rem;
            }
        }

        /* =========================================
           8. 5-STEP VISUAL SEARCH (The Hero Feature)
           ========================================= */
        /* =========================================
           8. CENTRAL SEARCH BAR (Redesigned)
           ========================================= */
        .search-bar-section {
            padding: 2rem 5%;
            background-color: var(--navy-secondary);
            border-bottom: 1px solid var(--gold-primary);
            position: relative;
            z-index: 100;
        }

        .search-box {
            background-color: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 3rem;
            border-radius: 16px;
            max-width: 1000px;
            margin: 0 auto;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(5px);
        }

        .search-controls {
            display: flex;
            gap: 1.5rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
            justify-content: center;
            align-items: flex-end;
        }

        .search-step-wrapper {
            flex: 1;
            min-width: 200px;
            text-align: left;
            opacity: 1;
            transition: 0.3s;
        }

        .search-step-wrapper.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        .search-step-wrapper label {
            display: block;
            color: var(--beige-primary);
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
        }

        .search-select {
            width: 100%;
            padding: 0.8rem;
            background-color: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            border-radius: 4px;
            font-family: var(--font-body);
            transition: 0.3s;
        }

        .search-select option {
            background-color: var(--navy-primary);
            color: var(--beige-primary);
        }

        .search-select:focus {
            border-color: var(--gold-primary);
            outline: none;
        }

        /* Results View Overlay */
        .results-view-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--navy-primary);
            z-index: 5000;
            overflow-y: auto;
            display: none;
            /* Hidden by default */
            flex-direction: column;
        }

        .results-view-overlay.active {
            display: flex;
            animation: fadeIn 0.4s var(--ease-smooth);
        }

        .results-header-bar {
            background-color: var(--navy-secondary);
            padding: 1rem 5%;
            display: flex;
            align-items: center;
            gap: 2rem;
            border-bottom: 1px solid var(--gold-primary);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .back-btn {
            background: none;
            border: 1px solid var(--gold-primary);
            color: var(--gold-primary);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
        }

        .back-btn:hover {
            background-color: var(--gold-primary);
            color: var(--navy-primary);
        }

        .results-container {
            display: flex;
            flex: 1;
            padding: 2rem 5%;
            gap: 2rem;
        }

        .results-filters {
            width: 250px;
            background-color: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            height: fit-content;
            display: none;
            /* Hidden on mobile initially, or can be toggle */
        }

        @media (min-width: 992px) {
            .results-filters {
                display: block;
            }
        }

        .results-main {
            flex: 1;
        }

        /* Grid and Items - Reusing existing or creating new */
        .results-grid {

            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 2rem;
        }

        .product-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .prod-img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            background-color: #000;
        }

        .in-stock-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            border: 1px solid var(--gold-primary);
            color: var(--gold-primary);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 2;
        }

        .prod-info {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .prod-cat {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--gold-primary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }

        .prod-title {
            font-size: 1.1rem;
            color: var(--beige-primary);
            margin: 0 0 8px 0;
            font-weight: 500;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            min-height: 3.1rem;
            /* Reserves space for exactly 2 lines */
        }

        .prod-finishes {
            font-size: 0.95rem;
            color: #d1d5db;
            margin: 0 0 12px 0;
            font-weight: 400;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            min-height: 2.6rem;
        }

        .prod-ask-price {
            font-size: 0.95rem;
            color: var(--beige-primary);
            margin: auto 0 1.5rem 0;
            font-weight: 500;
            opacity: 0.9;
        }

        .btn-whatsapp-catalog {
            background-color: var(--gold-primary);
            color: var(--navy-primary);
            width: 100%;
            padding: 0.8rem;
            border-radius: 6px;
            font-weight: 600;
            font-family: var(--font-body);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }

        .btn-whatsapp-catalog:hover {
            background-color: var(--gold-bright);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }

        .compatibility-badge {
            display: inline-block;
            background-color: rgba(201, 168, 76, 0.1);
            color: var(--gold-primary);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-bottom: 1rem;
        }

        /* =========================================
           9. SPECIALIST BRANDS & TABS (Feature 5)
           ========================================= */
        .brands-section {
            padding: 7rem 5%;
            background-color: var(--navy-secondary);
        }

        .brand-grid-large {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 2rem;
            margin-bottom: 4rem;
        }

        .brand-card-large {
            background-color: var(--card-bg);
            border: 1px solid var(--navy-primary);
            padding: 2rem;
            text-align: center;
            border-radius: 8px;
            transition: 0.3s;
            cursor: pointer;
        }

        .brand-card-large:hover {
            border-color: var(--gold-primary);
            transform: translateY(-10px);
            background-color: var(--navy-primary);
        }

        /* Premium Brand Cards Grid */
        .tabs-section {
            padding: 7rem 5%;
            background: linear-gradient(180deg, var(--bg-color) 0%, #050b14 100%);
        }

        .tabs-nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 3rem;
        }

        .tab-btn {
            background-color: #1a1f24;
            color: var(--beige-primary);
            border: none;
            padding: 1rem 3rem;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: var(--font-body);
        }

        .tab-btn:hover {
            background-color: var(--navy-primary);
            opacity: 0.9;
        }

        .tab-btn.active {
            background-color: var(--gold-primary);
            color: var(--navy-primary);
            font-weight: 600;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s var(--ease-smooth);
        }

        .tab-content.active {
            display: block;
        }

        .brand-hero-banner {
            width: 100%;
            height: 300px;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            margin-bottom: 2rem;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .brand-hero-overlay {
            background: rgba(10, 22, 40, 0.7);
            padding: 2rem;
            border: 1px solid var(--gold-primary);
            text-align: center;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* =========================================
           10. QUICK VIEW MODAL (Feature 3)
           ========================================= */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(10, 22, 40, 0.9);
            z-index: 9000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: 0.3s var(--ease-smooth);
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--card-bg);
            border: 2px solid var(--gold-primary);
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            border-radius: 8px;
            position: relative;
            display: flex;
            flex-direction: column;
            transform: scale(0.8);
            transition: 0.4s var(--ease-smooth);
        }

        @media (min-width: 768px) {
            .modal-content {
                flex-direction: row;
            }

            .modal-img-col {
                width: 50%;
            }

            .modal-info-col {
                width: 50%;
                padding: 3rem;
            }
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: var(--gold-primary);
            font-size: 2rem;
            cursor: pointer;
            z-index: 10;
        }

        .modal-img-col {
            background-color: #000;
            min-height: 300px;
            background-size: cover;
            background-position: center;
        }

        .modal-info-col {
            padding: 2rem;
        }

        .modal-specs ul {
            padding-left: 1.5rem;
            color: var(--text-secondary);
            margin: 1rem 0;
        }

        .modal-specs li {
            list-style: disc;
            margin-bottom: 0.5rem;
        }

        .modal-specs li::marker {
            color: var(--gold-primary);
        }

        /* =========================================
           11. PART REQUEST FORM (Feature 6)
           ========================================= */
        .request-section {
            padding: 7rem 5%;
            background-color: var(--navy-primary);
            border-top: 1px solid var(--gold-primary);
        }

        .request-form-container {
            max-width: 700px;
            margin: 0 auto;
            background-color: var(--card-bg);
            padding: 3rem;
            border-radius: 8px;
            border: 1px solid var(--navy-secondary);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--beige-primary);
        }

        .form-control {
            width: 100%;
            padding: 1rem;
            background-color: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            color: var(--text-primary);
            font-family: var(--font-body);
            transition: 0.3s;
        }

        select.form-control option {
            background-color: var(--navy-primary);
            color: var(--beige-primary);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--gold-primary);
        }

        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .form-row {
            display: flex;
            gap: 1rem;
        }

        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }

        /* =========================================
           12. GALLERY & LEGACY SECTIONS (Features 13, 14, 16, 17)
           ========================================= */
        .parallax-divider {
            height: 400px;
            background-attachment: fixed;
            background-position: center;
            background-size: cover;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .parallax-overlay {
            background: rgba(10, 22, 40, 0.6);
            padding: 2rem;
            border: 1px solid var(--gold-primary);
            text-align: center;
            backdrop-filter: blur(3px);
        }

        .gallery-section {
            padding: 7rem 5%;
            background-color: var(--navy-secondary);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .gallery-item {
            height: 250px;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.3s;
            position: relative;
            overflow: hidden;
        }

        .gallery-item:hover {
            transform: scale(1.02);
            z-index: 2;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
        }

        .gallery-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            transition: 0.3s;
        }

        .gallery-item:hover::after {
            background: rgba(0, 0, 0, 0);
        }

        /* =========================================
           12. OUR STORY & LEGACY (Two-Column Redesign)
           ========================================= */
        .story-legacy-container {
            display: flex;
            gap: 4rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .story-content {
            flex: 0 0 60%;
            max-width: 700px;
        }

        .story-sidebar {
            flex: 0 0 35%;
            display: flex;
            flex-direction: column;
            gap: 3rem;
        }

        @media (max-width: 992px) {
            .story-legacy-container {
                flex-direction: column;
                gap: 3rem;
            }

            .story-content,
            .story-sidebar {
                flex: 1 1 100%;
                max-width: 100%;
            }
        }

        /* Sidebar Stats */
        .sidebar-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .stat-item h3 {
            font-size: 2.5rem;
            color: var(--gold-primary);
            font-family: var(--font-heading);
            margin-bottom: 0.3rem;
        }

        .stat-item p {
            font-size: 0.9rem;
            color: var(--beige-primary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Sidebar Brands */
        .sidebar-heading {
            text-transform: uppercase;
            font-size: 1rem;
            color: var(--beige-primary);
            border-bottom: 1px solid rgba(201, 168, 76, 0.3);
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
            letter-spacing: 1px;
        }

        .sidebar-brands-list {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Image Row (Block 3) */
        .story-image-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            max-width: 1200px;
            margin: 4rem auto 0;
        }

        .story-image-placeholder {
            height: 300px;
            border-radius: 12px;
            background-color: rgba(255, 255, 255, 0.03);
            border: 1px dashed rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.3);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        @media (max-width: 768px) {
            .story-image-row {
                grid-template-columns: 1fr;
            }
        }

        .testimonials-section {
            padding: 4rem 5%;
            /* Reduced padding from 7rem to 4rem */
            background-color: var(--navy-secondary);
            overflow: hidden;
            /* Prevent horizontal scrollbar on the whole section */
        }

        .testimonials-scroll-container {
            display: flex;
            gap: 2rem;
            overflow-x: auto;
            padding-bottom: 2rem;
            /* Give some space for the scrollbar */
            scroll-snap-type: x mandatory;

            /* Hide scrollbar for cleaner look, but keep functionality */
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .testimonials-scroll-container::-webkit-scrollbar {
            display: none;
        }

        .testimonial-card {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: 8px;
            border: 1px solid var(--navy-primary);
            position: relative;
            margin-bottom: 1rem;

            /* Sizing for the horizontal scroll */
            flex: 0 0 300px;
            /* Fixed width for cards */
            scroll-snap-align: start;
        }

        .quote-icon {
            font-size: 3rem;
            color: var(--gold-primary);
            opacity: 0.3;
            position: absolute;
            top: 1rem;
            right: 1rem;
        }

        /* Contact Redesign */
        .contact-section {
            position: relative;
            padding: 7rem 5%;
            background-color: #F5EFE6;
            color: #1A1A1A;
            border-top: none;
            /* Removing previous top border to replace with elegant transition */
        }

        /* Elegant soft transition separator into the beige section */
        .contact-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            max-width: 1200px;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.4), transparent);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.2);
        }

        .contact-section h2,
        .contact-section h4 {
            color: #1A1A1A;
        }

        .contact-header {
            text-align: center;
            margin-bottom: 5rem;
        }

        .contact-header h2 {
            font-size: 2.8rem;
            position: relative;
            display: inline-block;
            margin-bottom: 1.5rem;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .contact-header h2::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 2px;
            background-color: #D4AF37;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 3rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        @media (min-width: 992px) {
            .contact-grid {
                grid-template-columns: 1fr 1fr;
                gap: 4rem;
                align-items: stretch;
            }
        }

        .contact-card {
            background-color: #EFE8DC;
            border-radius: 16px;
            padding: 3rem 2.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .contact-info-item {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 2rem;
            align-items: flex-start;
        }

        .contact-icon {
            font-size: 1.2rem;
            color: #D4AF37;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border: 1px solid #D4AF37;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .contact-icon svg {
            width: 20px;
            height: 20px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
        }

        .contact-details h4 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .contact-details p {
            color: #333333;
            margin-bottom: 0.2rem;
            font-size: 1rem;
        }

        .contact-details a {
            color: #D4AF37;
            text-decoration: none;
            font-weight: 500;
            display: inline-block;
            margin-top: 0.5rem;
            transition: opacity 0.3s;
        }

        .contact-details a:hover {
            opacity: 0.8;
        }

        .working-hours-table {
            width: 100%;
            margin-top: 0.5rem;
            border-collapse: collapse;
        }

        .working-hours-table td {
            padding: 0.5rem 0;
            color: #333333;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }

        .working-hours-table tr:last-child td {
            border-bottom: none;
        }

        .contact-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2.5rem;
            flex-wrap: wrap;
        }

        .btn-premium-gold {
            background-color: #D4AF37;
            color: #1A1A1A;
            border: 2px solid #D4AF37;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex: 1;
            min-width: 160px;
        }

        .btn-premium-gold:hover {
            background-color: #C6A75E;
            border-color: #C6A75E;
            color: #1A1A1A;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.2);
        }

        .btn-premium-outline {
            background-color: transparent;
            color: #D4AF37;
            border: 2px solid #D4AF37;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex: 1;
            min-width: 160px;
        }

        .btn-premium-outline:hover {
            background-color: #D4AF37;
            color: #1A1A1A;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.2);
        }

        .map-container {
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            min-height: 400px;
            display: flex;
        }

        .map-container iframe {
            width: 100%;
            height: 100%;
            border: 0;
            min-height: 400px;
        }

        footer {
            background-color: #050b14;
            padding: 5rem 5%;
            text-align: center;
            border-top: 1px solid var(--navy-secondary);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: 0.3s;
        }

        .footer-links a:hover {
            color: var(--gold-primary);
        }

        /* Main Content Wrapper */
        #main-content {
            padding: 0;
            width: 100%;
            opacity: 0;
            transition: opacity 1s var(--ease-smooth) 0.5s;
        }

        body.loaded #main-content {
            opacity: 1;
        }

        /* =========================================
           14. PRODUCT CARD STYLES (Missing)
           ========================================= */
        .product-card {
            background-color: var(--card-bg);
            border: 1px solid var(--navy-secondary);
            border-radius: 8px;
            overflow: hidden;
            transition: 0.3s;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .product-card:hover {
            transform: translateY(-5px);
            border-color: var(--gold-primary);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .prod-img {
            height: 200px;
            width: 100%;
            background-color: #000;
            background-size: cover;
            background-position: center;
        }

        .prod-info {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .prod-cat {
            text-transform: uppercase;
            font-size: 0.8rem;
            color: var(--gold-primary);
            margin-bottom: 0.5rem;
        }

        .prod-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--beige-primary);
        }

        .prod-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
            margin-bottom: 1rem;
            margin-top: auto;
        }
    </style>
</head>

<body>

    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="particles" id="loader-particles"></div>
        <div class="loader-logo">Al Rafa <span>Car Accessories</span></div>
        <div class="speedometer-container">
            <!-- <div class="speedometer-fill" id="speed-fill"></div> -->
            <div class="speedometer-needle" id="speed-needle"></div>
            <div class="needle-pivot"></div>
        </div>
        <div class="loading-bar-container">
            <div class="loading-bar-progress" id="load-progress"></div>
        </div>
    </div>

    <!-- Custom Cursor -->
    <div id="cursor-dot"></div>
    <div id="cursor-ring"></div>

    <!-- Navbar -->
    <nav id="main-nav">
        <div class="nav-logo">Al Rafa <span>Car Accessories</span></div>
        <div class="nav-links">
            <a href="#hero" data-i18n="home">Home</a>
            <a href="#search" data-i18n="search">Find Parts</a>
            <a href="#essentials">Car Care</a>
            <a href="#brands" data-i18n="brands">Specialist Brands</a>
            <a href="#about" data-i18n="about">About Us</a>
            <a href="#contact" data-i18n="contact">Contact</a>
        </div>

        <div style="display: flex; align-items: center; gap: 1rem;">
            <button class="lang-btn" onclick="toggleLanguage()">AR / EN</button>
            <button class="nav-cta" onclick="enquireOnWhatsApp('General Enquiry')">
                <span>Ask on WhatsApp</span>
            </button>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()"></button>
        </div>
    </nav>

    <!-- Main Content Wrapper -->
    <main id="main-content">

        <!-- Mobile Menu -->
        <div class="mobile-backdrop" id="mobile-backdrop" onclick="toggleMobileMenu()"></div>
        <div class="mobile-menu-overlay" id="mobile-menu">
            <button class="mobile-menu-btn" style="align-self: flex-end;" onclick="toggleMobileMenu()"></button>
            <a href="#hero" class="mobile-nav-link" onclick="toggleMobileMenu()" data-i18n="home">Home</a>
            <a href="#search" class="mobile-nav-link" onclick="toggleMobileMenu()" data-i18n="search">Find Parts</a>
            <a href="#essentials" class="mobile-nav-link" onclick="toggleMobileMenu()">Car Care</a>
            <a href="#brands" class="mobile-nav-link" onclick="toggleMobileMenu()" data-i18n="brands">Brands</a>
            <a href="#about" class="mobile-nav-link" onclick="toggleMobileMenu()" data-i18n="about">About Us</a>
            <a href="#contact" class="mobile-nav-link" onclick="toggleMobileMenu()" data-i18n="contact">Contact</a>
            <button class="lang-btn" onclick="toggleLanguage(); toggleMobileMenu()">Switch to Arabic</button>
        </div>

        <!-- Hero Section -->
        <section id="hero" class="hero-section">
            <div class="hero-bg" id="hero-bg-img"></div>
            <div class="hero-overlay"></div>
            <div class="particles" id="hero-particles"></div>

            <div class="hero-content reveal" id="hero-text">
                <h1 class="hero-title">Your Ride. Your Pride. <br> <span class="text-gold">Everything It Needs.</span>
                </h1>
                <p class="hero-subtitle">Specialists in <span class="text-gold">Toyota  Nissan  Lexus  Chevrolet 
                        Jeep  Volkswagen</span></p>

                <div class="hero-ctas">
                    <a href="#search" class="btn btn-gold">Shop Now</a>
                    <button class="btn btn-whatsapp" onclick="enquireOnWhatsApp('Hero Enquiry')">Chat on
                        WhatsApp</button>
                </div>
            </div>

            <div class="scroll-indicator reveal">
                <div class="mouse">
                    <div class="wheel"></div>
                </div>
            </div>
        </section>

        <!-- Trust Bar -->
        <div class="trust-bar-section">
            <div class="trust-bar-content">
                <span> 5000+ Motorists Served</span>
                <span style="color: var(--gold-primary);">|</span>
                <span> Genuine OEM Parts</span>
                <span style="color: var(--gold-primary);">|</span>
                <span> Fast Delivery Across Doha</span>
            </div>
        </div>

        <!-- 5-Step Visual Search -->
        <!-- =========================================
           8. CENTRAL SEARCH BAR (Redesigned)
           ========================================= -->
        <section id="search" class="search-bar-section">
            <div class="search-box reveal">
                <h2 class="text-beige"><span style="color:var(--gold-primary)">Find</span> Your Parts</h2>
                <div class="search-controls">
                    <!-- Step 1: Brand -->
                    <div class="search-step-wrapper">
                        <label>Brand</label>
                        <select id="sb-brand" class="search-select" onchange="onSearchBrandSelect()">
                            <option value="">Select Brand...</option>
                        </select>
                    </div>

                    <!-- Step 2: Model (Hidden initially) -->
                    <div class="search-step-wrapper disabled" id="sb-model-wrapper">
                        <label>Model</label>
                        <select id="sb-model" class="search-select" disabled>
                            <option value="">Select Model...</option>
                        </select>
                    </div>

                    <!-- Step 3: Year (Hidden initially) -->
                    <div class="search-step-wrapper disabled" id="sb-year-wrapper">
                        <label>Year</label>
                        <select id="sb-year" class="search-select" disabled>
                            <option value="">Select Year...</option>
                        </select>
                    </div>

                    <!-- Step 4: Action -->
                    <button id="sb-btn" class="btn btn-gold disabled" disabled onclick="performCentralSearch()">
                        Search Now
                    </button>
                </div>
            </div>

            <!-- Inline Results Container (Hidden initially) -->
            <div id="inline-results-container" style="display: none; margin-top: 3rem;">
                <div class="results-title-box" style="text-align: center; margin-bottom: 2rem;">
                    <h2 id="inline-results-heading" class="text-beige">Results</h2>
                    <p id="inline-results-subheading" class="text-gold">Showing available parts</p>
                </div>
                <!-- Grid -->
                <div class="results-grid" id="inline-results-grid">
                    <!-- Populated by JS -->
                </div>
            </div>
        </section>

        <!-- RESULTS VIEW OVERLAY -->
        <div id="results-view" class="results-view-overlay">
            <div class="results-header-bar">
                <button class="back-btn" onclick="closeResultsView()">
                     Back to Home
                </button>
                <div class="results-title-box">
                    <h2 id="results-heading">Results</h2>
                    <p id="results-subheading" class="text-gold">Showing compatible parts</p>
                </div>
            </div>

            <div class="results-container">
                <!-- Filters Sidebar -->
                <aside class="results-filters">
                    <h3>Categories</h3>
                    <ul id="results-filter-list">
                        <!-- Populated by JS -->
                    </ul>
                </aside>

                <!-- Grid -->
                <main class="results-main">
                    <div class="results-grid" id="main-results-grid">
                        <!-- Populated by JS -->
                    </div>
                </main>
            </div>
        </div>


        <!-- Part Request Form -->
        <section id="request-part" class="request-section" style="padding: 4rem 5%;">
            <div class="section-header reveal" style="margin-bottom: 2rem;">
                <h2>Can't Find Your Part?</h2>
                <p class="text-secondary">Tell us what you need and we'll source it for you  guaranteed.</p>
            </div>
            <div class="request-form-container reveal">
                <div class="form-row">
                    <div class="form-group" style="flex:1">
                        <label class="form-label">Car Brand</label>
                        <select class="form-control" id="req-brand" onchange="updateReqModels()">
                            <option value="">Select Brand</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex:1">
                        <label class="form-label">Car Model</label>
                        <select class="form-control" id="req-model">
                            <option value="">Select Model</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Part Name (Detailed)</label>
                    <input type="text" class="form-control" id="req-part"
                        placeholder="e.g. Front Right Headlight Assembly">
                </div>
                <div class="form-group">
                    <label class="form-label">Your Name</label>
                    <input type="text" class="form-control" id="req-name" placeholder="John Doe">
                </div>
                <div class="form-group">
                    <label class="form-label">Notes (Optional)</label>
                    <textarea class="form-control" id="req-notes" rows="3"
                        placeholder="Any specific details..."></textarea>
                </div>
                <button class="btn btn-gold" style="width:100%" onclick="sendPartRequest()">Send Request on
                    WhatsApp</button>
                <p style="text-align:center; margin-top:1rem; font-size:0.8rem; color:var(--text-secondary)">We
                    typically respond within minutes during business hours </p>
            </div>
        </section>

        <!-- Car Care & Essentials -->
        <section id="essentials" class="brands-section" style="background-color: var(--navy-primary);">
            <div class="section-header reveal">
                <h2>Car Care & Universal Accessories</h2>
                <p class="text-secondary" style="max-width:600px; margin:0 auto;">Premium cleaning supplies, interior
                    accessories, and universally compatible products for every vehicle.</p>
            </div>

            <div class="results-grid" id="essentials-grid">

                <div class="product-card reveal">
                    <div class="in-stock-badge">In Stock</div>
                    <div class="prod-img"
                        style="background-image: url('https://images.unsplash.com/photo-1601362840469-51e4d8d58785?auto=format&fit=crop&q=80&w=400')">
                    </div>
                    <div class="prod-info">
                        <div class="prod-cat">Cleaning</div>
                        <h4 class="prod-title">Premium Ceramic Car Wash Soap</h4>
                        <button class="btn-whatsapp-catalog"
                            onclick="enquireOnWhatsApp('Premium Ceramic Car Wash Soap')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51a12.8 12.8 0 0 0-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z" />
                            </svg>
                            Enquire on WhatsApp
                        </button>
                    </div>
                </div>

                <div class="product-card reveal">
                    <div class="in-stock-badge">In Stock in Store</div>
                    <div class="prod-img"
                        style="background-image: url('https://images.unsplash.com/photo-1627680509657-36c1e5cbdbdf?auto=format&fit=crop&q=80&w=400')">
                    </div>
                    <div class="prod-info">
                        <h4 class="prod-title">All-Weather Custom Fit Car Mats</h4>
                        <div class="prod-finishes">Available in: Black / Beige / Gray</div>
                        <div class="prod-ask-price">Ask for Price</div>
                        <button class="btn-whatsapp-catalog"
                            onclick="enquireOnWhatsApp('All-Weather Custom Fit Car Mats')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51a12.8 12.8 0 0 0-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z" />
                            </svg>
                            Enquire on WhatsApp
                        </button>
                    </div>
                </div>

                <div class="product-card reveal">
                    <div class="in-stock-badge">In Stock in Store</div>
                    <div class="prod-img"
                        style="background-image: url('https://images.unsplash.com/photo-1582294451016-5b48154d852a?auto=format&fit=crop&q=80&w=400')">
                    </div>
                    <div class="prod-info">
                        <h4 class="prod-title">Engine Bay Degreaser & Shine</h4>
                        <div class="prod-finishes">Available in: N/A</div>
                        <div class="prod-ask-price">Ask for Price</div>
                        <button class="btn-whatsapp-catalog"
                            onclick="enquireOnWhatsApp('Engine Bay Degreaser & Shine')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51a12.8 12.8 0 0 0-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z" />
                            </svg>
                            Enquire on WhatsApp
                        </button>
                    </div>
                </div>

                <div class="product-card reveal">
                    <div class="in-stock-badge">In Stock in Store</div>
                    <div class="prod-img"
                        style="background-image: url('https://images.unsplash.com/photo-1616423640778-28d1b53229bd?auto=format&fit=crop&q=80&w=400')">
                    </div>
                    <div class="prod-info">
                        <h4 class="prod-title">Premium Microfiber Towel Set (3 Pcs)</h4>
                        <div class="prod-finishes">Available in: Yellow / Blue / Gray</div>
                        <div class="prod-ask-price">Ask for Price</div>
                        <button class="btn-whatsapp-catalog"
                            onclick="enquireOnWhatsApp('Premium Microfiber Towel Set')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51a12.8 12.8 0 0 0-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z" />
                            </svg>
                            Enquire on WhatsApp
                        </button>
                    </div>
                </div>
            </div>
        </section>


        <section id="about" class="gallery-section" style="padding: 7rem 5%;">
            <div class="section-header reveal" style="margin-bottom: 4rem;">
                <h2>Our Story & Legacy</h2>
                <p class="text-secondary" style="max-width:600px; margin:0 auto;">Pioneers in Doha's automotive scene,
                    forged by uncompromised reliability.</p>
            </div>

            <div class="story-legacy-container reveal">
                <!-- Left Column: Story -->
                <div class="story-content text-secondary" style="line-height: 1.8; font-size: 1.05rem;">
                    <p style="margin-bottom: 1.5rem;">
                        Founded in 2002, Al Rafa Car Accessories began with a profound passion for iconic 4x4s like the
                        Toyota Land Cruiser and Nissan Patrol. Today, we stand as pioneers in Doha's automotive scene,
                        having forged a 24-year legacy built on uncompromised reliability, elite craftsmanship, and
                        deep-rooted expertise.
                    </p>
                    <p style="margin-bottom: 2rem;">
                        Having proudly upgraded and customized vehicles for over 5,000 enthusiasts across Qatar, we
                        recognize that true performance demands perfection. That's why our heritage is anchored in
                        supplying
                        only 100% genuine parts  with absolutely no shortcuts.
                    </p>
                    <p style="font-size: 1.1rem; color: var(--gold-primary); font-weight: 500;">
                        We don't just sell accessories; we uphold a multi-generational legacy of trust. At our showroom,
                        your peace of mind and satisfaction remain our ultimate standard.
                    </p>
                </div>

                <!-- Right Column: Sidebar -->
                <div class="story-sidebar">

                    <!-- Top: Stats -->
                    <div class="sidebar-stats" id="legacy-counters">
                        <div class="stat-item">
                            <h3 data-target="24">0</h3>
                            <p>Years of Experience</p>
                        </div>
                        <div class="stat-item">
                            <h3 data-target="5000">0</h3>
                            <p>Customers</p>
                        </div>
                        <div class="stat-item">
                            <h3 data-target="100">0</h3>
                            <p>% Genuine Parts</p>
                        </div>
                        <div class="stat-item">
                            <h3 style="font-size: 2rem;">T&N</h3>
                            <p>Specialists</p>
                        </div>
                    </div>

                    <!-- Middle: Brands -->
                    <div>
                        <h4 class="sidebar-heading">Specialists In</h4>
                        <p class="sidebar-brands-list">
                            Toyota &nbsp;&nbsp; Nissan &nbsp;&nbsp; Lexus &nbsp;&nbsp; Chevrolet &nbsp;&nbsp; Jeep
                            &nbsp;&nbsp; Volkswagen
                        </p>
                    </div>

                </div>
            </div>

            <!-- Block 3: Image Row -->
            <div class="story-image-row reveal">
                <div class="story-image-placeholder">Image Placeholder</div>
                <div class="story-image-placeholder">Image Placeholder</div>
                <div class="story-image-placeholder">Image Placeholder</div>
            </div>
        </section>

        <!-- Testimonials -->
        <section id="testimonials" class="testimonials-section" style="padding: 2rem 5% 1rem 5%;">
            <div class="section-header reveal" style="margin-bottom: 2rem;">
                <h2>What Enthusiasts Say</h2>
            </div>

            <div class="testimonials-scroll-container reveal">
                <!-- Testimonial 1 -->
                <div class="testimonial-card">
                    <div class="quote-icon"></div>
                    <p class="text-secondary" style="margin-bottom:1rem; font-style: italic;">"Changed whole body kit of
                        my Land Cruiser and it was fabulous. The fitment is perfect and looks completely original."</p>
                    <h4 class="text-gold">Mohammed Al-Thani</h4>
                    <p style="font-size:0.8rem">Toyota Land Cruiser LC300 Owner</p>
                </div>

                <!-- Testimonial 2 -->
                <div class="testimonial-card">
                    <div class="quote-icon"></div>
                    <p class="text-secondary" style="margin-bottom:1rem; font-style: italic;">"Upgraded the head lights
                        and back lights on my Patrol here. The difference is night and day, flawless installation."</p>
                    <h4 class="text-gold">Ahmed K.</h4>
                    <p style="font-size:0.8rem">Nissan Patrol Nismo Owner</p>
                </div>

                <!-- Testimonial 3 -->
                <div class="testimonial-card">
                    <div class="quote-icon"></div>
                    <p class="text-secondary" style="margin-bottom:1rem; font-style: italic;">"Stopped by to change the
                        battery on my Land Cruiser before a desert trip. Quick, professional, and genuine parts."</p>
                    <h4 class="text-gold">Sarah H.</h4>
                    <p style="font-size:0.8rem">Toyota Land Cruiser VXR Owner</p>
                </div>

                <!-- Testimonial 4 -->
                <div class="testimonial-card">
                    <div class="quote-icon"></div>
                    <p class="text-secondary" style="margin-bottom:1rem; font-style: italic;">"Found the exact
                        suspension lift kit for my Patrol waiting for me. Best prices for genuine Nissan parts in Doha
                        hands down."</p>
                    <h4 class="text-gold">Khalid Salem</h4>
                    <p style="font-size:0.8rem">Nissan Patrol Safari Owner</p>
                </div>

                <!-- Testimonial 5 -->
                <div class="testimonial-card">
                    <div class="quote-icon"></div>
                    <p class="text-secondary" style="margin-bottom:1rem; font-style: italic;">"Genuine parts only. I
                        don't trust anyone else with my high-end vehicles. Always top tier service for my Land Cruiser."
                    </p>
                    <h4 class="text-gold">Omar Al-Kuwari</h4>
                    <p style="font-size:0.8rem">Toyota Land Cruiser Owner</p>
                </div>

                <!-- Testimonial 6 -->
                <div class="testimonial-card">
                    <div class="quote-icon"></div>
                    <p class="text-secondary" style="margin-bottom:1rem; font-style: italic;">"Their WhatsApp service is
                        instant. Confirmed the Patrol Nismo body kit parts, paid, and got it installed the same week."
                    </p>
                    <h4 class="text-gold">Fahad Al-Marri</h4>
                    <p style="font-size:0.8rem">Nissan Patrol Platinum Owner</p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="contact-section">
            <div class="contact-header reveal">
                <h2>Visit Our Showroom</h2>
            </div>
            <div class="contact-grid reveal">
                <div class="contact-card">
                    <div class="contact-info-item">
                        <div class="contact-icon">
                            <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                        </div>
                        <div class="contact-details">
                            <h4>Address</h4>
                            <p>Al Ittihad St, Doha, Qatar</p>
                            <a href="https://www.google.com/maps/search/Al+Rafa+Car+Accessories+Doha/"
                                target="_blank">Get Directions </a>
                        </div>
                    </div>

                    <div class="contact-info-item">
                        <div class="contact-icon">
                            <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                                <path
                                    d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                                </path>
                            </svg>
                        </div>
                        <div class="contact-details">
                            <h4>Phone</h4>
                            <p>+974 3049 6000 (Primary/WhatsApp)</p>
                            <p>+974 5584 3969 (Secondary)</p>
                        </div>
                    </div>

                    <div class="contact-info-item">
                        <div class="contact-icon">
                            <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                        </div>
                        <div class="contact-details" style="flex: 1;">
                            <h4>Working Hours</h4>
                            <table class="working-hours-table">
                                <tr>
                                    <td>Sat  Thu</td>
                                    <td style="text-align: right;">8:00 AM  12:00 AM</td>
                                </tr>
                                <tr>
                                    <td>Friday</td>
                                    <td style="text-align: right;">4:00 PM  10:00 PM</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div class="contact-buttons">
                        <a href="tel:+97430496000" class="btn-premium-gold">Call Now</a>
                        <a href="https://wa.me/97430496000" class="btn-premium-outline">Chat on WhatsApp</a>
                    </div>
                </div>

                <!-- Google Map iframe -->
                <div class="map-container reveal">
                    <iframe
                        src="https://maps.google.com/maps?q=Al%20Rafa%20Car%20Accessories,%20Doha,%20Qatar&t=&z=14&ie=UTF8&iwloc=&output=embed"
                        allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div style="display:flex; justify-content:center; align-items:center; gap:1rem; margin-bottom:2rem">
            <h2 class="heading-font" style="color:var(--gold-primary); margin:0">AL RAFA CAR ACCESSORIES</h2>
        </div>
        <div class="footer-links">
            <a href="#hero">Home</a>
            <a href="#search">Find Parts</a>
            <a href="#essentials">Car Care</a>
            <a href="#brands">Brands</a>
            <a href="#about">About Us</a>
            <a href="#contact">Contact</a>
        </div>
        <div style="display:flex; justify-content:center; gap:2rem; margin-bottom:2rem; flex-wrap: wrap;">
            <!-- Social Icons -->
            <a href="https://www.instagram.com/alrafacaraccessories/" target="_blank" class="text-gold"
                style="font-size:1.2rem; display: flex; align-items: center; gap: 0.5rem; text-decoration: none; transition: opacity 0.3s;"
                onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                    <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                </svg>
                Instagram
            </a>
            <a href="#" target="_blank" class="text-gold"
                style="font-size:1.2rem; display: flex; align-items: center; gap: 0.5rem; text-decoration: none; transition: opacity 0.3s;"
                onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M12 21a9.23 9.23 0 0 0 4.14-1 9.9 9.9 0 0 0-4.14-1.93c-2-.36-4-1.2-4-1.2l-.76-2h-.63a2.43 2.43 0 0 1-2.43-2.43A2.43 2.43 0 0 1 6.61 10h.63l.76-2c0 0 2-.84 4-1.2a9.9 9.9 0 0 0 4.14-1.93A9.23 9.23 0 0 0 12 3a9.23 9.23 0 0 0-4.14 1 9.9 9.9 0 0 0 4.14 1.93c2 .36 4 1.2 4 1.2l.76 2h.63a2.43 2.43 0 0 1 2.43 2.43A2.43 2.43 0 0 1 17.39 14h-.63l-.76 2c0 0-2 .84-4 1.2a9.9 9.9 0 0 0-4.14 1.93A9.23 9.23 0 0 0 12 21z">
                    </path>
                </svg>
                Snapchat
            </a>
            <a href="https://wa.me/97430496000" target="_blank" class="text-gold"
                style="font-size:1.2rem; display: flex; align-items: center; gap: 0.5rem; text-decoration: none; transition: opacity 0.3s;"
                onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                    </path>
                </svg>
                WhatsApp
            </a>
        </div>
        <p class="text-secondary" style="font-size:0.8rem"> 2025 Al Rafa Car Accessories. All Rights Reserved. Built
            for Qatar's Car Community.</p>
    </footer>

    <!-- Quick View Modal -->
    <div id="quick-view-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="closeQuickView()"></button>
            <div class="modal-img-col" id="qv-img"></div>
            <div class="modal-info-col">
                <div class="prod-cat heading-font" id="qv-cat" style="color:var(--gold-primary)">CATEGORY</div>
                <h2 id="qv-title" style="margin: 0.5rem 0; color: var(--navy-primary); color:var(--beige-primary)">
                    Product Name</h2>
                <div id="qv-badge" class="compatibility-badge">Fits Toyota</div>
                <p id="qv-desc" style="color:var(--text-secondary); margin: 1.5rem 0;">
                    Genuine high-quality automotive part designed for performance and durability. Tested rigorously for
                    Qatar's conditions.
                </p>
                <div class="modal-specs">
                    <ul>
                        <li>Genuine OEM Specs</li>
                        <li>1 Year Warranty</li>
                        <li>Professional Installation Available</li>
                    </ul>
                </div>
                <h3 id="qv-price" class="text-gold" style="margin-bottom:2rem">QAR 000</h3>
                <button id="qv-btn" class="btn btn-whatsapp" style="width:100%;">Enquire on WhatsApp</button>
            </div>
        </div>
    </div>

    <!-- Mobile Sticky Split Bar -->
    <div id="mobile-sticky-bar">
        <a href="https://wa.me/97430496000" target="_blank" class="sticky-btn sticky-whatsapp">
            <span>WhatsApp</span>
        </a>
        <a href="tel:+97430496000" class="sticky-btn sticky-call">
            <span>Call Us</span>
        </a>
    </div>

    <!-- External Inventory Data -->
    <script src="js/products.js"></script>

    <!-- App Logic -->
    <script>
        // ============================================================
        //  IMAGE CONFIGURATION
        // ============================================================
        const SITE_IMAGES = {
            logo: '',
            loading_logo: '',
            hero_background: 'images/Background photo.jpg', // User uploaded cover photo
            parallax_1: 'https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?auto=format&fit=crop&q=80&w=1920', // Dark Engine
            parallax_2: 'https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?auto=format&fit=crop&q=80&w=1920', // Speed
            parallax_3: 'https://images.unsplash.com/photo-1494976388531-d1058494cdd8?auto=format&fit=crop&q=80&w=1920',
            brand_logos: {
                Toyota: 'images/Toyota logo.jpeg',
                Nissan: 'images/Nissan logo.png',
                Lexus: 'images/Lexus logo.png',
                Chevrolet: 'images/Chevrolet logo.png',
                Jeep: 'images/Jeep logo.png',
                Volkswagen: 'images/Volkswagen logo.png',
            },
            brand_banners: {
                Toyota: 'https://images.unsplash.com/photo-1582029704222-29774a3f295b?auto=format&fit=crop&q=80&w=1200',
                Nissan: 'https://images.unsplash.com/photo-1605218427368-35b868ccd699?auto=format&fit=crop&q=80&w=1200', // GTR
                Lexus: 'https://images.unsplash.com/photo-1532155099834-453716a56e79?auto=format&fit=crop&q=80&w=1200',
                Chevrolet: 'https://images.unsplash.com/photo-1552519507-da8b1227ad4a?auto=format&fit=crop&q=80&w=1200',
                Jeep: 'https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?auto=format&fit=crop&q=80&w=1200',
                Volkswagen: 'https://images.unsplash.com/photo-1526726538690-5cbf956ae2fd?auto=format&fit=crop&q=80&w=1200',
            },
            model_thumbnails: {
                'default': 'https://images.unsplash.com/photo-1553440569-bcc63803a83d?auto=format&fit=crop&q=80&w=300'
            },
            categories: {
                'Bumpers': 'https://images.unsplash.com/photo-1550474681-34440368b556',
                // ... placeholders for others can default to generic
            },
            products: {
                'product_001': 'https://images.unsplash.com/photo-1553440569-bcc63803a83d',
                'product_002': 'https://images.unsplash.com/photo-1605218427368-35b868ccd699',
                'product_003': 'https://images.unsplash.com/photo-1503376763036-066120622c74',
            },
            shop: {
                exterior: 'https://images.unsplash.com/photo-1486262715619-67b85e0b08d3',
                interior: 'https://images.unsplash.com/photo-1492144534655-ae79c964c9d7',
                team: 'PLACEHOLDER_TEAM_PHOTO',
                workshop: 'PLACEHOLDER_WORKSHOP',
            },
            testimonials: {
                customer_1: 'https://ui-avatars.com/api/?name=Ali+H&background=D4AF37&color=fff',
                customer_2: 'https://ui-avatars.com/api/?name=Sarah+M&background=D4AF37&color=fff',
                customer_3: 'https://ui-avatars.com/api/?name=Mohd+K&background=D4AF37&color=fff',
            },
        };

        // ============================================================
        //  COLOR AVAILABILITY HELPER
        // ============================================================
        function getColorsForYear(product, searchYear) {
            // If the product doesn't use the new year-mapped colors, hide the line entirely
            if (!product.availableColors) {
                return null;
            }

            // Iterate over the year brackets (e.g., "1998-2007")
            for (const [yearBracket, colors] of Object.entries(product.availableColors)) {
                const [startStr, endStr] = yearBracket.split('-');
                const startYear = parseInt(startStr);
                const endYear = parseInt(endStr);

                // If the searched year falls within this bracket, return these colors
                if (searchYear >= startYear && searchYear <= endYear) {
                    return colors;
                }
            }

            // Fallback if the year exists but has no defined colors
            return 'Check for availability';
        }

        // ============================================================
        //  BRAND DATA OBJECT
        // ============================================================
        const carData = {
            Toyota: {
                logo: SITE_IMAGES.brand_logos.Toyota,
                models: {
                    'Land Cruiser': { years: Array.from({ length: 29 }, (_, i) => 1998 + i) },
                }
            },
            Nissan: {
                logo: SITE_IMAGES.brand_logos.Nissan,
                models: {
                    'Patrol': { years: Array.from({ length: 29 }, (_, i) => 1998 + i) },
                }
            },
            Lexus: {
                logo: SITE_IMAGES.brand_logos.Lexus,
                models: {
                    'LX 570': { years: Array.from({ length: 16 }, (_, i) => 2008 + i) },
                    'LX 600': { years: Array.from({ length: 4 }, (_, i) => 2022 + i) },
                }
            }
        };

        // ============================================================
        //  LOADING SCREEN LOGIC
        // ============================================================
        document.addEventListener('DOMContentLoaded', () => {
            const hasVisited = sessionStorage.getItem('alRafaVisited');
            // Remove 'hasVisited' check for development so I can see it every reload
            // In prod: if (!hasVisited) { ... }

            // Start Logic
            runLoadingAnimation();
            initCustomCursor();
            initNavbar();
            initNavbar();
            initHero();
            initDynamicImages();
            initCentralSearch();
            initPartRequestForm();
            initLegacyCounters();
            initScrollAnimations();
        });

        // ============================================================
        //  CENTRAL SEARCH BAR LOGIC
        // ============================================================
        const COMMON_PARTS = [
            "Headlight", "Taillight", "Bumper (Front)", "Bumper (Rear)",
            "Brake Pads", "Shock Absorber", "Radiator", "Alternator",
            "Spark Plugs", "Oil Filter", "Air Filter", "Battery",
            "Door Handle", "Mirror (Side)", "Grille", "Fog Light"
        ];

        function initCentralSearch() {
            const brandSelect = document.getElementById('sb-brand');
            Object.keys(carData).forEach(brand => {
                const opt = document.createElement('option');
                opt.value = brand;
                opt.innerText = brand;
                brandSelect.appendChild(opt);
            });

            // Populate Part Options
            const partList = document.getElementById('part-options');
            COMMON_PARTS.forEach(part => {
                const opt = document.createElement('option');
                opt.value = part;
                partList.appendChild(opt);
            });
        }

        function onSearchBrandSelect() {
            const brand = document.getElementById('sb-brand').value;
            const modelWrapper = document.getElementById('sb-model-wrapper');
            const modelSelect = document.getElementById('sb-model');
            const yearWrapper = document.getElementById('sb-year-wrapper');
            const yearSelect = document.getElementById('sb-year');
            const partWrapper = document.getElementById('sb-part-wrapper');
            const partInput = document.getElementById('sb-part');
            const btn = document.getElementById('sb-btn');

            // Reset downstream
            modelSelect.innerHTML = '<option value="">Select Model...</option>';
            modelSelect.disabled = true;
            modelWrapper.classList.add('disabled');
            yearSelect.innerHTML = '<option value="">Select Year...</option>';
            yearSelect.disabled = true;
            yearWrapper.classList.add('disabled');
            partInput.value = '';
            partInput.disabled = true;
            partInput.placeholder = "Select Year first...";
            partWrapper.classList.add('disabled');
            btn.disabled = true;
            btn.classList.add('disabled');

            if (brand && carData[brand]) {
                // Populate Models
                const models = Object.keys(carData[brand].models);
                models.forEach(model => {
                    const opt = document.createElement('option');
                    opt.value = model;
                    opt.innerText = model;
                    modelSelect.appendChild(opt);
                });

                // Enable Model Input
                modelSelect.disabled = false;
                modelWrapper.classList.remove('disabled');

                // Add listener for model change to enable year
                modelSelect.onchange = () => {
                    if (modelSelect.value) {
                        // Populate Years (1998 to 2025)
                        yearSelect.innerHTML = '<option value="">Select Year...</option>';
                        for (let y = 2025; y >= 1998; y--) {
                            const opt = document.createElement('option');
                            opt.value = y;
                            opt.innerText = y;
                            yearSelect.appendChild(opt);
                        }
                        yearSelect.disabled = false;
                        yearWrapper.classList.remove('disabled');
                    } else {
                        yearSelect.disabled = true;
                        yearWrapper.classList.add('disabled');
                        partInput.disabled = true;
                        partWrapper.classList.add('disabled');
                        btn.disabled = true;
                        btn.classList.add('disabled');
                    }
                };

                // Add listener for year change to enable part & button
                yearSelect.onchange = () => {
                    if (yearSelect.value) {
                        partInput.disabled = false;
                        partInput.placeholder = "e.g. Headlight";
                        partWrapper.classList.remove('disabled');
                        btn.disabled = false; // Can search without part too
                        btn.classList.remove('disabled');
                    } else {
                        partInput.disabled = true;
                        partInput.placeholder = "Select Year first...";
                        partWrapper.classList.add('disabled');
                        btn.disabled = true;
                        btn.classList.add('disabled');
                    }
                };
            }
        }

        function performCentralSearch() {
            const brand = document.getElementById('sb-brand').value;
            const model = document.getElementById('sb-model').value;
            const year = document.getElementById('sb-year').value;

            if (!brand || !model || !year) return;

            showInlineResults(brand, model, year);
        }

        // ============================================================
        //  INLINE RESULTS VIEW LOGIC
        // ============================================================
        function showInlineResults(brand, model, year) {
            const container = document.getElementById('inline-results-container');
            const grid = document.getElementById('inline-results-grid');
            const heading = document.getElementById('inline-results-heading');
            const subheading = document.getElementById('inline-results-subheading');

            heading.innerText = `${brand} ${model} (${year})`;
            subheading.innerText = `Found parts in stock`;

            // Show the container
            container.style.display = 'block';
            grid.innerHTML = ''; // Clear previous results

            // Filter Actual Inventory
            const selectedYear = parseInt(year);
            const results = window.INVENTORY.filter(product => {
                // If the product is for a Land Cruiser, also show it for Prado
                const modelMatch = product.model === model ||
                    (product.model === 'Land Cruiser' && model === 'Prado');

                return product.brand === brand &&
                    modelMatch &&
                    selectedYear >= product.yearStart &&
                    selectedYear <= product.yearEnd;
            });

            if (results.length === 0) {
                subheading.innerText = `Sorry, no parts found for this specific vehicle yet.`;
            } else {
                subheading.innerText = `Found ${results.length} parts in stock`;

                results.forEach(product => {
                    // Use placeholder if no image provided yet
                    const imgUrl = product.image || SITE_IMAGES.model_thumbnails.default;
                    const displayColors = getColorsForYear(product, selectedYear);
                    const colorsHtml = displayColors ? `<div class="prod-finishes">Available in: ${displayColors}</div>` : '';

                    grid.innerHTML += `
                        <div class="product-card reveal active">
                            <div class="in-stock-badge">In Stock in Store</div>
                            <div class="prod-img" style="background-image: url('${imgUrl}')"></div>
                            <div class="prod-info">
                                <h4 class="prod-title">${product.name}</h4>
                                ${colorsHtml}
                                <div class="prod-ask-price">Ask for Price</div>
                                <div style="display:flex; gap:0.5rem">
                                    <button class="btn btn-whatsapp" style="width:100%; padding:0.8rem; font-size:0.9rem" 
                                        onclick="enquireOnWhatsAppWithCar('${product.name}', '${brand}', '${model} ${year}')">
                                        Enquire on WhatsApp
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }

            // Scroll down a bit to show results
            container.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // ============================================================
        //  RESULTS VIEW LOGIC
        // ============================================================
        function showResultsView(brand, model, year, part) {
            const view = document.getElementById('results-view');
            const grid = document.getElementById('main-results-grid');
            const heading = document.getElementById('results-heading');
            const subheading = document.getElementById('results-subheading');
            const filterList = document.getElementById('results-filter-list');

            // Filter Actual Inventory
            const selectedYear = parseInt(year);
            let results = window.INVENTORY.filter(product => {
                const modelMatch = product.model === model ||
                    (product.model === 'Land Cruiser' && model === 'Prado');

                return product.brand === brand &&
                    modelMatch &&
                    selectedYear >= product.yearStart &&
                    selectedYear <= product.yearEnd;
            });

            if (part) {
                results = results.filter(product => product.name.toLowerCase().includes(part.toLowerCase()));
            }

            heading.innerText = `${brand} ${model} (${year})`;
            subheading.innerText = part ? `Showing results for "${part}"` : `Found ${results.length} compatible parts in stock`;

            // Extract unique categories from results for the filters
            const categories = [...new Set(results.map(p => p.category))];

            // Populate Filters
            filterList.innerHTML = '';
            categories.forEach(cat => {
                filterList.innerHTML += `<li style="margin-bottom:0.5rem; cursor:pointer; color:var(--text-secondary)" onclick="this.style.color='var(--gold-primary)'">${cat}</li>`;
            });

            // Populate Grid
            grid.innerHTML = '';

            if (results.length === 0) {
                grid.innerHTML = `<p style="color:var(--text-secondary); grid-column: 1 / -1;">No products found for this specific vehicle yet.</p>`;
            } else {
                results.forEach(product => {
                    const imgUrl = product.image || SITE_IMAGES.model_thumbnails.default;
                    const displayColors = getColorsForYear(product, selectedYear);
                    const colorsHtml = displayColors ? `<div class="prod-finishes">Available in: ${displayColors}</div>` : '';

                    const qvData = JSON.stringify({
                        name: product.name,
                        price: product.price || 'Ask',
                        cat: product.category,
                        fits: `${product.brand} ${product.model} ${year}`
                    }).replace(/'/g, "&#39;").replace(/"/g, "&quot;");

                    grid.innerHTML += `
                        <div class="product-card">
                            <div class="in-stock-badge">In Stock in Store</div>
                            <div class="prod-img" style="background-image: url('${imgUrl}')"></div>
                            <div class="prod-info">
                                <h4 class="prod-title">${product.name}</h4>
                                ${colorsHtml}
                                <div class="prod-ask-price">Ask for Price</div>
                                <button class="btn-whatsapp-catalog" 
                                    onclick="enquireOnWhatsAppWithCar('${product.name}', '${brand}', '${model} ${year}')">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51a12.8 12.8 0 0 0-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/>
                                    </svg>
                                    Enquire on WhatsApp
                                </button>
                            </div>
                        </div>
                    `;
                });
            }

            view.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeResultsView() {
            document.getElementById('results-view').classList.remove('active');
            document.body.style.overflow = '';
        }
        function initDynamicImages() {
            // Parallax 2 (we only added one divider in HTML, id="parallax-2")
            // If we had more we'd target them.
            const p2 = document.getElementById('parallax-2');
            if (p2 && SITE_IMAGES.parallax_2 !== 'PLACEHOLDER') {
                p2.style.backgroundImage = `url('${SITE_IMAGES.parallax_2}')`;
            } else if (p2) {
                p2.style.background = 'linear-gradient(rgba(10,22,40,0.7), rgba(10,22,40,0.7)), url("https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?auto=format&fit=crop&q=80&w=2070")';
                p2.style.backgroundSize = 'cover';
                p2.style.backgroundAttachment = 'fixed';
            }
        }

        // --- Scroll Animations (Reveal) ---
        function initScrollAnimations() {
            const reveals = document.querySelectorAll('.reveal');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                        // Optional: unobserve if you want it to happen only once
                        // observer.unobserve(entry.target); 
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: "0px 0px -50px 0px"
            });

            reveals.forEach(el => observer.observe(el));
        }




        // --- Legacy Counters (Intersection Observer) ---
        function initLegacyCounters() {
            const counters = document.querySelectorAll('.stat-item h3');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const target = +entry.target.getAttribute('data-target');
                        animateCounter(entry.target, target);
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });

            counters.forEach(c => observer.observe(c));
        }

        function animateCounter(el, target) {
            let current = 0;
            const increment = target / 50; // Speed
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                    let suffix = '';
                    if (target === 24 || target >= 5000) {
                        suffix = '+';
                    }
                    else if (target === 100) {
                        suffix = '%';
                    }
                    el.innerText = target + suffix;
                } else {
                    el.innerText = Math.ceil(current);
                }
            }, 30);
        }


        // ... (Smart Search Logic) ...

        // Update renderResults methods to use openQuickView
        // Note: The previous renderResults and switchBrandTab had buttons. 
        // We will define openQuickView globally so they work.

        // ============================================================
        //  QUICK VIEW MODAL LOGIC (Feature 3)
        // ============================================================
        function openQuickView(data) {
            // Data can be object or params. For search/grid buttons we passed args
            // But here I'm handling a generic object.
            // If calling from HTML string: openQuickView({name: '...', ...})

            const modal = document.getElementById('quick-view-modal');

            document.getElementById('qv-title').innerText = data.name || 'Product';
            document.getElementById('qv-price').innerText = 'QAR ' + (data.price || 'Ask');
            document.getElementById('qv-cat').innerText = data.cat || 'Accessory';

            const badge = document.getElementById('qv-badge');
            if (data.fits) {
                badge.style.display = 'inline-block';
                badge.innerText = `Fits ${data.fits}`;
            } else {
                badge.style.display = 'none';
            }

            // Update WhatsApp Button
            const btn = document.getElementById('qv-btn');
            const note = data.fits ? ` for ${data.fits}` : '';
            btn.onclick = () => enquireOnWhatsApp(`I am interested in *${data.name}*${note}. Price: ${data.price}`);

            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Lock Body Scroll
        }

        function closeQuickView() {
            document.getElementById('quick-view-modal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close on outside click
        document.getElementById('quick-view-modal').addEventListener('click', (e) => {
            if (e.target.id === 'quick-view-modal') closeQuickView();
        });

        // ============================================================
        //  CENTRAL SEARCH BAR LOGIC
        // ============================================================
        function initCentralSearch() {
            const brandSelect = document.getElementById('sb-brand');
            Object.keys(carData).forEach(brand => {
                const opt = document.createElement('option');
                opt.value = brand;
                opt.innerText = brand;
                brandSelect.appendChild(opt);
            });
        }

        function onSearchBrandSelect() {
            const brand = document.getElementById('sb-brand').value;
            const modelWrapper = document.getElementById('sb-model-wrapper');
            const modelSelect = document.getElementById('sb-model');
            const yearWrapper = document.getElementById('sb-year-wrapper');
            const yearSelect = document.getElementById('sb-year');
            const btn = document.getElementById('sb-btn');

            // Reset downstream
            modelSelect.innerHTML = '<option value="">Select Model...</option>';
            modelSelect.disabled = true;
            modelWrapper.classList.add('disabled');
            yearSelect.innerHTML = '<option value="">Select Year...</option>';
            yearSelect.disabled = true;
            yearWrapper.classList.add('disabled');
            btn.disabled = true;
            btn.classList.add('disabled');

            if (brand && carData[brand]) {
                // Populate Models
                const models = Object.keys(carData[brand].models);
                models.forEach(model => {
                    const opt = document.createElement('option');
                    opt.value = model;
                    opt.innerText = model;
                    modelSelect.appendChild(opt);
                });

                // Enable Model Input
                modelSelect.disabled = false;
                modelWrapper.classList.remove('disabled');

                // Add listener for model change to enable year
                modelSelect.onchange = () => {
                    if (modelSelect.value) {
                        // Populate Years (Generic 1998-2025)
                        yearSelect.innerHTML = '<option value="">Select Year...</option>';
                        for (let y = 2025; y >= 1998; y--) {
                            const opt = document.createElement('option');
                            opt.value = y;
                            opt.innerText = y;
                            yearSelect.appendChild(opt);
                        }
                        yearSelect.disabled = false;
                        yearWrapper.classList.remove('disabled');
                    } else {
                        yearSelect.disabled = true;
                        yearWrapper.classList.add('disabled');
                    }
                };

                // Add listener for year change to enable button
                yearSelect.onchange = () => {
                    if (yearSelect.value) {
                        btn.disabled = false;
                        btn.classList.remove('disabled');
                    } else {
                        btn.disabled = true;
                        btn.classList.add('disabled');
                    }
                };
            }
        }

        function performCentralSearch() {
            const brand = document.getElementById('sb-brand').value;
            const model = document.getElementById('sb-model').value;
            const year = document.getElementById('sb-year').value;

            if (!brand || !model || !year) return;

            showInlineResults(brand, model, year);
        }

        // ============================================================
        //  RESULTS VIEW LOGIC
        // ============================================================
        function showResultsView(brand, model, year) {
            const view = document.getElementById('results-view');
            const grid = document.getElementById('main-results-grid');
            const heading = document.getElementById('results-heading');
            const subheading = document.getElementById('results-subheading');
            const filterList = document.getElementById('results-filter-list');

            // Filter Actual Inventory for the selected brand, model, and year range
            const selectedYear = parseInt(year);
            const results = window.INVENTORY.filter(product => {
                return product.brand === brand &&
                    product.model === model &&
                    selectedYear >= product.yearStart &&
                    selectedYear <= product.yearEnd;
            });

            heading.innerText = `${brand} ${model} (${year})`;
            subheading.innerText = `Found ${results.length} compatible parts in stock`;

            // Extract unique categories from results for the filters
            const categories = [...new Set(results.map(p => p.category))];

            // Populate Filters
            filterList.innerHTML = '';
            categories.forEach(cat => {
                filterList.innerHTML += `<li style="margin-bottom:0.5rem; cursor:pointer; color:var(--text-secondary)" onclick="this.style.color='var(--gold-primary)'">${cat}</li>`;
            });

            // Populate Grid
            grid.innerHTML = '';

            if (results.length === 0) {
                grid.innerHTML = `<p style="color:var(--text-secondary); grid-column: 1 / -1;">No products found for this specific vehicle yet.</p>`;
            } else {
                results.forEach(product => {
                    const imgUrl = product.image || SITE_IMAGES.model_thumbnails.default;
                    const qvData = JSON.stringify({
                        name: product.name,
                        price: product.price || 'Ask',
                        cat: product.category,
                        fits: `${product.brand} ${product.model} ${year}`
                    }).replace(/'/g, "&#39;").replace(/"/g, "&quot;");

                    grid.innerHTML += `
                        <div class="product-card">
                            <div class="in-stock-badge">In Stock in Store</div>
                            <div class="prod-img" style="background-image: url('${imgUrl}')"></div>
                            <div class="prod-info">
                                <h4 class="prod-title">${product.name}</h4>
                                <div class="prod-finishes">Available in: ${product.finishes}</div>
                                <div class="prod-ask-price">Ask for Price</div>
                                <button class="btn-whatsapp-catalog" 
                                    onclick="enquireOnWhatsAppWithCar('${product.name}', '${brand}', '${model} ${year}')">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51a12.8 12.8 0 0 0-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/>
                                    </svg>
                                    Enquire on WhatsApp
                                </button>
                            </div>
                        </div>
                    `;
                });
            }

            view.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeResultsView() {
            document.getElementById('results-view').classList.remove('active');
            document.body.style.overflow = '';
        }

        // ============================================================
        //  PART REQUEST FORM (Feature 6)
        // ============================================================
        function initPartRequestForm() {
            const brandSelect = document.getElementById('req-brand');
            Object.keys(carData).forEach(brand => {
                const opt = document.createElement('option');
                opt.value = brand;
                opt.innerText = brand;
                brandSelect.appendChild(opt);
            });
        }

        function updateReqModels() {
            const brand = document.getElementById('req-brand').value;
            const modelSelect = document.getElementById('req-model');
            modelSelect.innerHTML = '<option value="">Select Model</option>';

            if (brand && carData[brand]) {
                const models = Object.keys(carData[brand].models);
                models.forEach(model => {
                    const opt = document.createElement('option');
                    opt.value = model;
                    opt.innerText = model;
                    modelSelect.appendChild(opt);
                });
            }
        }

        function sendPartRequest() {
            const brand = document.getElementById('req-brand').value;
            const model = document.getElementById('req-model').value;
            const part = document.getElementById('req-part').value;
            const name = document.getElementById('req-name').value;
            const notes = document.getElementById('req-notes').value;

            if (!brand || !model || !part || !name) {
                alert('Please fill in all required fields.');
                return;
            }

            const message = `Hi Al Rafa! My name is *${name}* and I'm looking for a part for my *${brand} ${model}*.\n\n*Part Required:* ${part}\n*Additional Notes:* ${notes || 'None'}\n\nCould you please help me source this part? Thank you!`;
            window.open(`https://wa.me/97430496000?text=${encodeURIComponent(message)}`, '_blank');
        }


        function runLoadingAnimation() {
            const needle = document.getElementById('speed-needle');
            const progress = document.getElementById('load-progress');

            // Animate Needle
            setTimeout(() => {
                needle.style.transform = 'rotate(90deg)';
                progress.style.width = '100%';
            }, 100);

            // Particles for loader
            createParticles('loader-particles', 20);

            // Finish
            setTimeout(() => {
                document.body.classList.add('loaded');
                sessionStorage.setItem('alRafaVisited', 'true');

                // Trigger Hero Reveal after loader
                setTimeout(() => {
                    document.getElementById('hero-text').classList.add('visible');
                    document.querySelector('.scroll-indicator').classList.add('visible');
                }, 500);
            }, 2500);
        }

        function createParticles(containerId, count) {
            const container = document.getElementById(containerId);
            if (!container) return;

            for (let i = 0; i < count; i++) {
                const p = document.createElement('div');
                p.classList.add('particle');
                p.style.left = Math.random() * 100 + '%';
                p.style.top = Math.random() * 100 + '%';
                p.style.width = (Math.random() * 5 + 2) + 'px';
                p.style.height = p.style.width;
                p.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(p);
            }
        }

        function initHero() {
            // Set Background
            const heroBg = document.getElementById('hero-bg-img');
            if (SITE_IMAGES.hero_background !== 'PLACEHOLDER_HERO_CAR_IMAGE') {
                heroBg.style.backgroundImage = `url('${SITE_IMAGES.hero_background}')`;
            } else {
                // Fallback gradient if image not set
                heroBg.style.background = 'radial-gradient(circle at center, #1b2d48 0%, #0a1628 100%)';
            }

            // Particles
            createParticles('hero-particles', 30);
        }
        // ============================================================
        //  CUSTOM CURSOR LOGIC
        // ============================================================
        function initCustomCursor() {
            const dot = document.getElementById('cursor-dot');
            const ring = document.getElementById('cursor-ring');

            let mouseX = 0, mouseY = 0;
            let ringX = 0, ringY = 0;

            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;

                // Dot follows immediately
                dot.style.left = mouseX + 'px';
                dot.style.top = mouseY + 'px';
            });

            // Lag effect for ring
            function animateRing() {
                ringX += (mouseX - ringX) * 0.15; // Smooth factor
                ringY += (mouseY - ringY) * 0.15;

                ring.style.left = ringX + 'px';
                ring.style.top = ringY + 'px';

                requestAnimationFrame(animateRing);
            }
            animateRing();

            // Hover interactions
            const interactables = document.querySelectorAll('a, button, .nav-logo');
            interactables.forEach(el => {
                el.addEventListener('mouseenter', () => document.body.classList.add('hovering-button'));
                el.addEventListener('mouseleave', () => document.body.classList.remove('hovering-button'));
            });
        }

        // ============================================================
        //  NAVBAR & MOBILE MENU LOGIC
        // ============================================================
        function initNavbar() {
            const nav = document.getElementById('main-nav');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    nav.classList.add('scrolled');
                } else {
                    nav.classList.remove('scrolled');
                }
            });
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('active');
            document.getElementById('mobile-backdrop').classList.toggle('active');
        }

        // ============================================================
        //  LANGUAGE / RTL LOGIC
        // ============================================================
        let currentLang = 'en';

        const TRANSLATIONS = {
            en: {
                home: 'Home',
                search: 'Find Parts',
                brands: 'Brands',
                featured: 'Featured',
                gallery: 'Gallery',
                contact: 'Contact',
                heroTitle: 'Genuine Parts.<br>Unmatched Reliability.',
                heroSub: 'The #1 Source for Toyota, Nissan & 4x4 Parts in Qatar.',
                reqTitle: "Can't Find Your Part?",
                reqSub: "Tell us what you need and we'll source it for you."
            },
            ar: {
                home: '',
                search: '  ',
                brands: ' ',
                featured: '',
                gallery: '',
                contact: ' ',
                heroTitle: '  .<br>  .',
                heroSub: '       .',
                reqTitle: "  ",
                reqSub: "     ."
            }
        };

        function toggleLanguage() {
            currentLang = currentLang === 'en' ? 'ar' : 'en';
            setLanguage(currentLang);
        }

        function setLanguage(lang) {
            // Document Direction
            document.documentElement.setAttribute('lang', lang);
            document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');

            // Text Content Updates (Simple Implementation)
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (TRANSLATIONS[lang][key]) {
                    el.innerText = TRANSLATIONS[lang][key];
                }
            });

            // Specific Header Updates (Manual target for complex HTML)
            if (lang === 'ar') {
                document.querySelector('.hero-title').innerHTML = TRANSLATIONS.ar.heroTitle;
                document.querySelector('.hero-subtitle').innerText = TRANSLATIONS.ar.heroSub;
                document.querySelector('#request-part h2').innerText = TRANSLATIONS.ar.reqTitle;
                document.querySelector('#request-part p').innerText = TRANSLATIONS.ar.reqSub;
            } else {
                document.querySelector('.hero-title').innerHTML = TRANSLATIONS.en.heroTitle;
                document.querySelector('.hero-subtitle').innerText = TRANSLATIONS.en.heroSub;
                document.querySelector('#request-part h2').innerText = TRANSLATIONS.en.reqTitle;
                document.querySelector('#request-part p').innerText = TRANSLATIONS.en.reqSub;
            }
        }


        // ============================================================
        //  WHATSAPP HELPERS
        // ============================================================
        function enquireOnWhatsApp(message) {
            window.open(`https://wa.me/97430496000?text=${encodeURIComponent('Hi Al Rafa! ' + message)}`, '_blank');
        }

        function enquireOnWhatsAppWithCar(productName, brand, carDetails) {
            const message = `Hi Al Rafa!\n\nI am interested in the following product:\n*${productName}*\n*For my ${carDetails}*\n\nIs it available and what is the price?`;
            window.open(`https://wa.me/97430496000?text=${encodeURIComponent(message)}`, '_blank');
        }

        // Removed old createParticles to avoid duplication with the new refactored one above
    </script>
</body>

</html>